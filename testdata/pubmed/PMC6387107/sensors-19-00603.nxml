<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.0 20120330//EN" "JATS-archivearticle1.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" article-type="research-article"><?properties open_access?><front><journal-meta><journal-id journal-id-type="nlm-ta">Sensors (Basel)</journal-id><journal-id journal-id-type="iso-abbrev">Sensors (Basel)</journal-id><journal-id journal-id-type="publisher-id">sensors</journal-id><journal-title-group><journal-title>Sensors (Basel, Switzerland)</journal-title></journal-title-group><issn pub-type="epub">1424-8220</issn><publisher><publisher-name>MDPI</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="pmid">30709013</article-id><article-id pub-id-type="pmc">6387107</article-id><article-id pub-id-type="doi">10.3390/s19030603</article-id><article-id pub-id-type="publisher-id">sensors-19-00603</article-id><article-categories><subj-group subj-group-type="heading"><subject>Article</subject></subj-group></article-categories><title-group><article-title>An IoT-Based Solution for Intelligent Farming <xref ref-type="author-notes" rid="fn1-sensors-19-00603">&#x02020;</xref></article-title></title-group><contrib-group><contrib contrib-type="author"><contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0002-4017-8140</contrib-id><name><surname>N&#x000f3;brega</surname><given-names>Lu&#x000ed;s</given-names></name><xref ref-type="aff" rid="af1-sensors-19-00603">1</xref><xref rid="c1-sensors-19-00603" ref-type="corresp">*</xref></contrib><contrib contrib-type="author"><name><surname>Gon&#x000e7;alves</surname><given-names>Pedro</given-names></name><xref ref-type="aff" rid="af2-sensors-19-00603">2</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0003-0230-8714</contrib-id><name><surname>Pedreiras</surname><given-names>Paulo</given-names></name><xref ref-type="aff" rid="af1-sensors-19-00603">1</xref></contrib><contrib contrib-type="author"><name><surname>Pereira</surname><given-names>Jos&#x000e9;</given-names></name><xref ref-type="aff" rid="af3-sensors-19-00603">3</xref></contrib></contrib-group><aff id="af1-sensors-19-00603"><label>1</label>DETI/IT&#x02014;Universidade de Aveiro, 3810-193 Aveiro, Portugal; <email>pbrp@ua.pt</email></aff><aff id="af2-sensors-19-00603"><label>2</label>ESTGA/IT&#x02014;Universidade de Aveiro, 3810-193 Aveiro, Portugal; <email>pasg@ua.pt</email></aff><aff id="af3-sensors-19-00603"><label>3</label>iFarmTec, 3680-264 S&#x000e3;o Jo&#x000e3;o da Serra, Portugal; <email>jose@ifarmtec.pt</email></aff><author-notes><corresp id="c1-sensors-19-00603"><label>*</label>Correspondence: <email>lnobrega@ua.pt</email>; Tel.: +351-927-855-558</corresp><fn id="fn1-sensors-19-00603"><label>&#x02020;</label><p>This paper is an extended version of Temprilho, A.; N&#x000f3;brega, L.; Gon&#x000e7;alves, P.; Pedreiras, P.; Silva, S. M2M Communication Stack for Intelligent Farming. In Proceedings of the Global Internet of Things Summit (GIoTS), Bilbao, Spain, 4&#x02013;7 June 2018.</p></fn></author-notes><pub-date pub-type="epub"><day>31</day><month>1</month><year>2019</year></pub-date><pub-date pub-type="collection"><month>2</month><year>2019</year></pub-date><volume>19</volume><issue>3</issue><elocation-id>603</elocation-id><history><date date-type="received"><day>15</day><month>12</month><year>2018</year></date><date date-type="accepted"><day>27</day><month>1</month><year>2019</year></date></history><permissions><copyright-statement>&#x000a9; 2019 by the authors.</copyright-statement><copyright-year>2019</copyright-year><license license-type="open-access"><license-p>Licensee MDPI, Basel, Switzerland. This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC BY) license (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link>).</license-p></license></permissions><abstract><p>Intelligent farming is one of the vast range of applications covered by the Internet of Things concept. Notwithstanding, such applications present specific requirements and constraints that are dependent on their purpose. A practical case on which that is particularly relevant is the SheepIT project, where an automated IoT-based system controls grazing sheep within vineyards, guaranteeing that they do not threaten cultures. Due to its rigid requirements, particularly regarding the deployment of the Wireless Sensor Network, Machine-2-Machine communications and necessary interactions with a computational platform available through the Internet, Internet Protocol-based solutions are not suitable. Consequently, a customized communication stack has been developed, that intends to meet the project requirements, from the physical to the Application Layers. Although it has been developed considering the SheepIT requirements, its use may be extended to more generic intelligent farming applications, since most of the requirements are directly related with the farming environment. This paper reviews the proposed stack and details the recent developments. Particularly, we focused on Internet of Things/Machine-2-Machine interaction, describing the design and deployment of a gateway that addresses the SheepIT service requirements. Additionally, and complementary to previously published results, we evaluate the gateway performance and show its feasibility and scalability in a real scenario.</p></abstract><kwd-group><kwd>IoT</kwd><kwd>M2M stack</kwd><kwd>constrained networks</kwd><kwd>intelligent farming</kwd><kwd>IoT gateway</kwd></kwd-group></article-meta></front><body><sec sec-type="intro" id="sec1-sensors-19-00603"><title>1. Introduction and Motivation</title><p>The massification and exponential proliferation of the number of electronic devices connected to the Internet triggered the emergence of the Internet of Things (IoT) concept. With it, we are moving towards an <italic>anytime, anyone, anything</italic> connectivity paradigm [<xref rid="B1-sensors-19-00603" ref-type="bibr">1</xref>], with applications for different activity sectors, such as transportation, smart things (e.g., smart cities, smart domotics, smart health), e-governance, assisted living, e-education, retail, logistics, automation, industrial manufacturing and naturally, intelligent farming [<xref rid="B2-sensors-19-00603" ref-type="bibr">2</xref>].</p><p>Focusing on the intelligent farming domain, it is consensual that the employment of IoT-based applications can play an important role in the sustainability of the sector [<xref rid="B3-sensors-19-00603" ref-type="bibr">3</xref>]. On the one hand, it helps farmers on their daily tasks. On the other hand, it may contribute to increasing the productivity and sustainability of the sector, through the optimization of farming processes. Notwithstanding, such application domain is surrounded by constraints, either associated with technologies or to the specificities of farmings&#x02019; users. The former include limitations and trade-offs between energy consumption, device&#x02019;s size/weight, autonomy and wireless communication coverage [<xref rid="B4-sensors-19-00603" ref-type="bibr">4</xref>]. The latter is related to the intrinsic mistrust of farmers when adopting new technologies [<xref rid="B5-sensors-19-00603" ref-type="bibr">5</xref>].</p><p>When applying IoT to the agriculture domain, Machine-to-Machine (M2M) communications are a central key, enabling ubiquitous and autonomous communications among multiple devices without human mediation [<xref rid="B6-sensors-19-00603" ref-type="bibr">6</xref>]. Thus, requirements such as efficiency, scalability, low-cost hardware and low-power consumption are transposed to this kind of communications. However, these requirements are dramatically dependent on the application scenarios, which has led to the emergence of a vast number of protocols, standards, communication stacks and architectures, each one addressing specific subsets of issues and/or applications.</p><p>Commonly, these architectures are structured as protocol stacks with different numbers of layers [<xref rid="B7-sensors-19-00603" ref-type="bibr">7</xref>], enabling levels of abstraction between them and the use of different protocols. The simplest one is based on three layers: the Perception Layer, the Network Layer and the Application Layer. However, as this architecture is considered too simplistic, other models with additional layers were proposed [<xref rid="B8-sensors-19-00603" ref-type="bibr">8</xref>]. Albeit the most trendy one is based on five layers, practical IoT systems implementations commonly use four layers (Physical and MAC Layer, Network Layer, Transport Layer and Application Layer) [<xref rid="B9-sensors-19-00603" ref-type="bibr">9</xref>], following an IP-based network architecture. Our proposal is based on a four layer communication stack, and thus, in this paper the most relevant protocols on each one of these layers are presented.</p><p>Succinctly, IEEE.802.15.4 [<xref rid="B10-sensors-19-00603" ref-type="bibr">10</xref>] is one of the most popular technologies used on the Physical and MAC layers. At the Network layer, the Internet Protocol (IP), either IPv4 and IPv6, is generally used, eventually with adaptation layers (e.g., 6LoWPAN [<xref rid="B11-sensors-19-00603" ref-type="bibr">11</xref>]) to deal with resource-constrained devices. Finally, at the Application Layer, solutions such as the Constrained Application Protocol (CoAP) [<xref rid="B12-sensors-19-00603" ref-type="bibr">12</xref>], the Advanced Message Queuing Protocol (AMQP) [<xref rid="B13-sensors-19-00603" ref-type="bibr">13</xref>], the Message Queuing Telemetry Transport (MQTT) [<xref rid="B14-sensors-19-00603" ref-type="bibr">14</xref>] and the Hypertext Transfer Protocol (HTTP) [<xref rid="B15-sensors-19-00603" ref-type="bibr">15</xref>] are commonly found.</p><p>However, several other approaches coexist, due to the high heterogeneity of this kind of application and increasing need for low-cost and low-power solutions. SIGFOX [<xref rid="B16-sensors-19-00603" ref-type="bibr">16</xref>], NB-IOT [<xref rid="B17-sensors-19-00603" ref-type="bibr">17</xref>], LTE-M [<xref rid="B18-sensors-19-00603" ref-type="bibr">18</xref>] and LoRa [<xref rid="B19-sensors-19-00603" ref-type="bibr">19</xref>] are some popular examples that are part of the Low-Power Wide-Area Network (LPWAN) technologies. These protocols share the low energy consumption at expenses of limited functionality and bandwidth.</p><p>This heterogeneity of solutions also led to the development of several IoT gateways (hardware and standards) [<xref rid="B20-sensors-19-00603" ref-type="bibr">20</xref>] to allow the interaction between different networks, protocols and communication technologies. Here, most research efforts are focused on the horizontal integration of different protocols and communication technologies, leaving aside additional services that may be relevant for some IoT applications.</p><p>Despite the significant research effort devoted to M2M/IoT applications in recent years, there are still practical cases that exhibit requirements and constraints that are not addressed nor satisfied by existing solutions. One of these applications is addressed by the SheepIT project [<xref rid="B21-sensors-19-00603" ref-type="bibr">21</xref>], which aims at deploying an IoT-based solution for monitoring, condition and managing flocks of sheep, such that animals could weed vineyard cultures (or similar ones) in an environmentally-friendly way.</p><p>This application shares many of the common IoT features and requirements. For instance:<list list-type="bullet"><list-item><p>The amount of data exchanged is relatively low and size limited;</p></list-item><list-item><p>Devices shall have low size and weight;</p></list-item><list-item><p>To avoid constant battery replacements and/or recharges, a high autonomy is required;</p></list-item><list-item><p>The geographical area to be covered can be relatively vast;</p></list-item><list-item><p>The system shall be robust and reliable.</p></list-item></list></p><p>Additionally, SheepIT exhibits a few distinctive requirements that, when combined with the aforementioned ones, preclude the use of existing IoT solutions. The complete and detailed set of requirements can be found in [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>], but they can be briefly summarized as follows:<list list-type="bullet"><list-item><p>The presence of irregular slopes with several obstacles;</p></list-item><list-item><p>Unforeseeable node mobility (sheep);</p></list-item><list-item><p>Variable node densities due to the flock movement;</p></list-item><list-item><p>Need for real-time localization, preferably resorting to Received Signal Strength Indicator (RSSI)-based localization;</p></list-item><list-item><p>Need to ensure the coexistence of an effective control posture mechanism;</p></list-item><list-item><p>Frequent system reconfigurations by non-technical personnel.</p></list-item></list></p><p>In order to fulfill these needs, an architecture was designed composed by a Wireless Sensor Network (WSN) [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>] and a Computational Platform (CP) [<xref rid="B23-sensors-19-00603" ref-type="bibr">23</xref>] accessible via the Internet. The WSN comprises a set of instrumented mobile nodes carried by sheep (collars); a set of statically placed nodes for defining the grazing area and collect sheep&#x02019;s data (beacons); and a gateway that, besides connecting the WSN to the CP, delivers local services. Due to the application constraints, all WSN components were customized, avoiding the use of IP-based solutions up to the gateway level. The gateway was also developed specifically for this application, allowing a smooth integration between the local WSN and the computational platform (IP-based), as well as the integration of a local management service, to enable users to easily interact with the system for management and supervision procedures.</p><p>In order to support other intelligent farming solutions with similar requirements of SheepIT, a new M2M protocol stack was proposed by Temprilho et al. [<xref rid="B24-sensors-19-00603" ref-type="bibr">24</xref>]. This paper extends that work significantly, by improving the state of the art review and presenting a more complete and thorough discussion of the proposed stack. Furthermore, a special focus is given to gateway, detailing its design, implementation and validation.</p><p>The remainder of this paper is organized as follows. <xref ref-type="sec" rid="sec2-sensors-19-00603">Section 2</xref> surveys the related work and analyzes the suitability of the existing protocol stacks in the context of SheepIT. Then, in <xref ref-type="sec" rid="sec3-sensors-19-00603">Section 3</xref>, we present the network stack architecture and discuss the differences with respect to the state-of-the-art approaches. A special focus is given to the messages exchanged on the local network domain and to the gateway design. The feasibility of the approach is evaluated in <xref ref-type="sec" rid="sec4-sensors-19-00603">Section 4</xref>, particularly in what concerns the gateway scalability. Finally, <xref ref-type="sec" rid="sec5-sensors-19-00603">Section 5</xref> presents the conclusions.</p></sec><sec id="sec2-sensors-19-00603"><title>2. Related Work</title><p>The IoT domain embraces a huge number of applications with different goals, features, requirements and constraints. Consequently, to solve the specific needs of such applications, a wide range of communication models, protocols and standards have been emerging, being either applied on WSN, M2M or Cyber-Physical Systems (CPS) [<xref rid="B7-sensors-19-00603" ref-type="bibr">7</xref>]. Considering the needs of the agricultural sector, the first part of this section presents a review of the most relevant communication technologies, protocol stacks and standards. Additionally, we evaluate if their use could meet the SheepIT project needs, as well as other related intelligent farming applications. Then, we perform a survey on existing animal monitoring solutions for livestock support, focusing on their distinctive features.</p><sec id="sec2dot1-sensors-19-00603"><title>2.1. IoT/M2M Protocols and Communication Technologies</title><p>IoT encompasses an ample number of communication networks, either WSN, M2M, CPS, or a combination of them. From these, M2M communications are seen as the foundation of IoT platforms [<xref rid="B6-sensors-19-00603" ref-type="bibr">6</xref>] since they allow the ubiquitous and autonomous communications between devices without human intervention [<xref rid="B25-sensors-19-00603" ref-type="bibr">25</xref>].</p><p>M2M networks comprise both wired and wireless solutions but, the increasing need of mobility and scalability, together with the inherent high installation costs of wired solutions, have led to an increasing number of M2M wireless options. These can be organized in three groups (<xref ref-type="fig" rid="sensors-19-00603-f001">Figure 1</xref>): firstly, the <italic>capillary</italic> solutions [<xref rid="B26-sensors-19-00603" ref-type="bibr">26</xref>], where a local network coexists with a local gateway that makes the interaction with Wide Area Networks. Some examples are the Wireless Local Area Networks (WLANs) such as WiFI or HiperLan, and the Short-range Wireless solutions such as Bluetooth, ZigBee and Z-Wave. These solutions are characterized by a data rate that can go from bits per second to megabits per second; secondly, the popular cellular networks, which have a greater communication range compared to the capillary solutions, being the 2G, 3G, 4G or more recently the Long Term Evolution (LTE), some examples; finally, addressing the specific IoT/M2M communication requirements, particularly power consumption and autonomy, a new set of technologies started to gain relevance, the denominated Low-Power Wide-Area Networks (LPWANs). These technologies combine the wide range capability of cellular networks with the lower power consumption of <italic>capillary</italic> solutions [<xref rid="B27-sensors-19-00603" ref-type="bibr">27</xref>].</p><p>Cellular networks and the WLAN&#x02019;s were not considered to be used in the scope of the SheepIT project, due to their higher power consumption and price. Thus, our targets are the short-range wireless communications and LPWAN solutions. Among these, some may resort to gateways to interact with other networks while others resort to proprietary protocols.</p><p>This heterogeneity of approaches has led to the definition of distinctive IoT protocol stack models [<xref rid="B7-sensors-19-00603" ref-type="bibr">7</xref>] with three, four or five layers. The simplest one is based on three layers: (i) The Perception Layer, which is the lowest layer and includes all the functionalities related with physical sensors; (ii) The Network Layer, which is responsible for ensuring a seamless transmission of the data gathered on the Perception Layer to the Application Layer; (iii) and the Application Layer that allows the customization of different services according to user requirements and needs. However, some authors consider this approach too simplistic and hence a model of five layers gained popularity [<xref rid="B8-sensors-19-00603" ref-type="bibr">8</xref>]. On this model, besides the Perception and Application Layers, already included in the three-layer model, three other layers are included, namely: (i) Transport or Object abstraction Layer, responsible for receiving the data gathered on the Perception Layer and making it available to upper layers; (ii) Processing, Service management or Middleware Layer that deals with the huge amount of data that is gathered and with the big heterogeneity of objects within the Perception Layer; and (iii) Business Layer, that allows the management of the whole IoT system.</p><p>Notwithstanding, due to the interoperability and popularity of IP, many practical deployments of IoT applications follow a typical four layer TCP/IP architecture (Physical and MAC Layer, Network Layer, Transport Layer and Application Layer) with the necessary adaptations, particularly in terms of the protocols that can be used on each layer. Consequently, and as our proposed stack is also based on four layers, the following survey tackles the most popular protocols used on those layers, as suggested by Naik [<xref rid="B9-sensors-19-00603" ref-type="bibr">9</xref>] and illustrated on <xref ref-type="fig" rid="sensors-19-00603-f002">Figure 2</xref>. Furthermore, after reviewing those protocols we also survey two additional approaches. On the one hand, we survey the LPWAN technologies because of their potentiality when applied to IoT/M2M scenarios. On the other hand, we review Non-IP based stacks, which are relevant because there are IoT application domains with energy, processing and radio bandwidth constraints that are so severe that they cannot be handled by the remaining methods. Finally, and since the main contribution of this paper is the development of an IoT Gateway capable of addressing the SheepIT project requirements, we also provide a survey on existing IoT Gateways and highlight the specificities of our solution.</p><sec id="sec2dot1dot1-sensors-19-00603"><title>2.1.1. Physical and Mac Layers</title><p>IEEE 802.15.4 is still one of the most popular standards within the Physical and MAC layers. It was designed with three main requirements in mind: low consumption, low complexity and low cost [<xref rid="B28-sensors-19-00603" ref-type="bibr">28</xref>]. Hence, it was adopted by several relevant protocols, such as ZigBee, ISA100 and WirelessHART. It operates mainly in the ISM band of 2.4 GHz, although it can also operate in the 868 MHz (in Europe) and 915 MHz (in the United States of America) bands. It supports data rates up to the 250 kbps and, concerning the MAC Layer, both Carrier Sense Multiple Access/Collision Avoidance (CSMA/CA) and Time Division Multiple Access (TDMA) (in the beacon-enabled mode) are supported. However, the literature reports significant limitations of the latter mode, particularly regarding the network formation [<xref rid="B29-sensors-19-00603" ref-type="bibr">29</xref>] and mobility [<xref rid="B30-sensors-19-00603" ref-type="bibr">30</xref>]. Besides IEEE 802.15.4, several alternatives emerged at the Physical Layer, but are not directly inter-operable with IP, requiring intermediate layers or Gateways. Examples are Z-Wave, designed particularly for domotics [<xref rid="B31-sensors-19-00603" ref-type="bibr">31</xref>] and EPC-Global for RFID technologies [<xref rid="B32-sensors-19-00603" ref-type="bibr">32</xref>].</p></sec><sec id="sec2dot1dot2-sensors-19-00603"><title>2.1.2. Network Layer</title><p>Regarding the Network Layer, the Internet Protocol (IP) is the predominant choice, with two coexisting versions, IPv4 and IPv6. The latter one was born due to the exponential increase of the number of addressable devices and consequent exhaustion of available IP addresses. Consequently, the introduction of IPv6 was inevitable, being introduced gradually on all networking devices. Nevertheless, and despite its popularity and interoperability, its direct use on IoT devices is not always reasonable. The overhead of such protocols (and inherent processing needs), usually clashes with the constraints associated to IoT devices. Thus, a big effort was made by the 6LoWPAN working group (WG) from IETF, in order to minimize the IPv6 limitations and to make it suitable to be used by IoT devices. As a result of such work, the 6LoWPAN protocol was released [<xref rid="B11-sensors-19-00603" ref-type="bibr">11</xref>], defining the specifications of the Network Layer of IP-based WPANs based on IEEE 802.15.4 physical and MAC layers. This protocol defines an intermediate layer between the MAC and Network layers, the Adaptation Layer (AL), that aims at ensuring the interoperability between the referred layers, implementing compression, fragmentation and reassembly mechanisms. Despite the advances attained by this AL, the complexity introduced for supporting IPv6 is still too high for technologies that excel by their simplicity, low power consumption and low overhead. Some examples are the Bluetooth Low Energy (BLE) and Near Field Communication (NFC). Hence, the 6lo working group extended the 6LoWPAN protocol to these two technologies, establishing the IPv6-over-foo AL [<xref rid="B33-sensors-19-00603" ref-type="bibr">33</xref>]. Pursuing similar goals, Farris et al. [<xref rid="B33-sensors-19-00603" ref-type="bibr">33</xref>] proposed a similar solution for integrating RFID systems into IPv6 networks. Notwithstanding, and despite all the efforts, there will always exist a significant overhead associated to the implementation of such ALs, which may make them inappropriate for tightly constrained applications.</p><p>Still within the Network Layer, the Routing Protocol for Low Power and Lossy Networks (RPL) [<xref rid="B34-sensors-19-00603" ref-type="bibr">34</xref>] is the main option considered when deploying routing on 6LoWPAN solutions. This protocol was specified by the IETF Routing Over Low Power and Lossy Networks WG (ROLL) and it briefly consists on a distance vector routing protocol that uses Destination Oriented Directed Acyclic Graphs (DODAG) to define routes. The construction of the graph is made through an objective function (OF) that dynamically defines the routing metrics to be used taking into account the network constraints. In addition to the support of different traffic flows, as point-to-point, point-to-multipoint and multipoint-to-point, RPL adapts itself to the network rate and accepts routing metrics such as link quality or current battery status of devices, in exchange for a higher computational cost.</p></sec><sec id="sec2dot1dot3-sensors-19-00603"><title>2.1.3. Transport Layer</title><p>The Transport Layer, also known as Host-to-Host Transport Layer, is directly transposed from IP to the IoT domain. Here, the two most important protocols are the Transmission Control Protocol (TCP) and the User Datagram Protocol (UDP). TCP is a connection oriented protocol that ensures a reliable data delivery with end-to-end error detection and correction in exchange for a higher overhead and lower data transmission speed compared to UDP. Contrary, UDP is a connection-less low-overhead protocol that does not ensure any kind of acknowledgement, privileging the data transmission speed over the data transmission quality. Both protocols are commonly used by different applications and its choice is closely dependent on the application requirements.</p></sec><sec id="sec2dot1dot4-sensors-19-00603"><title>2.1.4. Application Layer</title><p>The Application Layer creates the final level of abstraction that allows the development of different kinds of user applications. In addition, the strict computational and energy constraints of IoT devices prompted the emergence of several lightweight application layer protocols, such as CoAP, AMQP, MQTT and HTTP, to cite just a few.</p><p>COAP [<xref rid="B12-sensors-19-00603" ref-type="bibr">12</xref>] is based on a request/response architecture and runs over UDP. As it is based on HTTP methods, it is interoperable with HTTP. For security, it uses the Datagram Transport Layer Security, similar to TLS in TCP. AMQP [<xref rid="B35-sensors-19-00603" ref-type="bibr">35</xref>] is based on an asynchronous publish/subscribe architecture, runs over TCP and uses TLS/SSL to ensure security. It provides Quality-Of-Service (QoS) guarantees, specifically: <italic>at most once, at least once and exactly once</italic>. As AMQP, MQTT [<xref rid="B36-sensors-19-00603" ref-type="bibr">36</xref>] also runs over TCP, it is also based on an asynchronous publish/subscribe architecture; it also uses TLS/SSL to ensure security and it supports three types of QoS, in this case: <italic>fire and forget, delivered at least once and delivered exactly once</italic>. HTTP is a popular web messaging protocol based on a request/response architecture [<xref rid="B37-sensors-19-00603" ref-type="bibr">37</xref>]. It runs over TCP, uses TLS/SSL for security and does not define any QoS. Contrary to the aforementioned protocols, HTTP does not define the header and payload sizes, being dependent on the web server implementation. The choice of the protocol to be used is a daunting task and depends greatly on the kind of application and devices used. Thus, normally, there is not just one possible correct choice [<xref rid="B9-sensors-19-00603" ref-type="bibr">9</xref>].</p></sec><sec id="sec2dot1dot5-sensors-19-00603"><title>2.1.5. Low-Power Wide-Area Network Technologies</title><p>An emergent area on low power communications respects the LPWAN technologies. They operate in the license-free bands of the spectrum and can be positioned between the cellular networks and the short-range communications, taking the best of each one. They potentially cover communication ranges similar to a cellular cell, keeping a low power consumption like some of the short-range communications technologies. The data rates are also similar to the short-range communication solutions and, despite being smaller than WLANs and cellular networks data rates, are adequate for many IoT solutions. Some examples are Sigfox, Long Range (LoRa) WAN, NarrowBand-IoT (NB-IoT) and LTE-M.</p><p>Sigfox [<xref rid="B16-sensors-19-00603" ref-type="bibr">16</xref>] is a centralized, cellular-like, low-throughput wireless communication system. Energy-wise, it is very efficient, but it provides a limited capacity (a few messages per day with up to 12 bytes each). It requires cellular coverage which, at least in Portugal, is based on the deployment of gateways on existing public telecommunications base-stations. Its actual coverage is still relatively small, particularly in rural areas. It does not allow to perform localization and the bandwidth is insufficient for reporting the amount of data required by the SheepIT project.</p><p>LoRa [<xref rid="B19-sensors-19-00603" ref-type="bibr">19</xref>] is a Wireless Wide Area Network (WWAN) specification designed to allow long range communications for IoT-like applications. It was designed to minimize energy consumption and provides modest bit-rates (300 bps to 50 kbps per channel). It may be used as a private network, but it may also be used to deploy a shared service infrastructure. LoRa provides a reasonable bandwidth and is energy-efficient. It also permits RSSI-based localization, but its performance in this regard is poor. For example, a practical evaluation in a limited area (110 &#x000d7; 64 m) and with an infrastructure based on six anchor nodes, impracticable for farming applications, generates errors of several meters [<xref rid="B38-sensors-19-00603" ref-type="bibr">38</xref>]. LoRa also has a Time-of-Flight based localization scheme that is proprietary, closed source and can only be used in a black-box manner. Results on its accuracy are scarce, but indicate a poor performance, at least for wide ranges (e.g., 100 m for stationary nodes using a public location service [<xref rid="B39-sensors-19-00603" ref-type="bibr">39</xref>]). Moreover, LoRa prescribes a star topology and constrains the kind of synchronization and communication between nodes and the gateways (e.g., for battery-powered devices&#x02014;class A uses an ALOHA-like protocol, without synchronization, and with dedicated receiving slots that may not be needed). Finally, LoRa nodes were considered too expensive to be implemented in each of the animal sensors.</p><p>NB-IOT [<xref rid="B17-sensors-19-00603" ref-type="bibr">17</xref>] and LTE-M [<xref rid="B18-sensors-19-00603" ref-type="bibr">18</xref>], part of 3GPP Long-Term Evolution (LTE), have been developed for M2M and IoT applications. Despite providing relatively high bandwidth and potentially low consumption, these protocols depend on a public communication infrastructure, which is often unavailable in rural areas, so it is unsuited for the objectives of SheepIT. Moreover, the need for paying a fee to the telecom operator by each animal eventually may lead to unbearable exploration costs.</p></sec><sec id="sec2dot1dot6-sensors-19-00603"><title>2.1.6. Non-IP Protocol Stacks for M2M</title><p>There are several applications that avoid the use of IP-based solutions in order to optimize resources, processes and communications. Therefore, there are several approaches that resort to non-IP communication solutions, either resorting to ALs, implementing communication stacks as a whole, or both.</p><p>ZigBee is a practical example of a full communication stack. It is based on the IEEE 802.15.4 standard for the Physical and MAC layers, the higher layers being defined by the Zigbee Alliance [<xref rid="B19-sensors-19-00603" ref-type="bibr">19</xref>]. It aimed at offering a low power wireless communication mechanism and gained particular popularity on WSN deployments. However, as introduced in <xref ref-type="sec" rid="sec2dot1dot1-sensors-19-00603">Section 2.1.1</xref> IEEE 802.15.4 presents relevant constraints when considered for TDMA scenarios.</p><p>BLE is another popular and trendy solution for low power communication solutions. It is an enhanced version of the classic Bluetooth, allowing communication ranges 10 times higher (around 100 m), lower radio power and lower latencies. Its use is more popular on WSN applications [<xref rid="B40-sensors-19-00603" ref-type="bibr">40</xref>] and vehicle-to-vehicle communications [<xref rid="B41-sensors-19-00603" ref-type="bibr">41</xref>], but besides its effective reduction of power consumption and increased range, it still presents severe limitations on both star and mesh topologies deployments [<xref rid="B42-sensors-19-00603" ref-type="bibr">42</xref>].</p><p>EPCglobal and Z-Wave can both be used as fully integrated solutions or by the mean of adaptation layers (as introduced in <xref ref-type="sec" rid="sec2dot1-sensors-19-00603">Section 2.1</xref>). The former is relevant for UHF RFID devices while the latter was designed for home automation applications.</p><p>In sum, there are a multitude of solutions to deploying an IoT/M2M application, either in terms of protocol stacks or communications technologies. The standardization efforts regarding communications on those domains are impaired by the high heterogeneity of applications and their requirements.</p></sec><sec id="sec2dot1dot7-sensors-19-00603"><title>2.1.7. IoT Gateways</title><p>The diversity of IoT applications, devices and protocols, creates a natural lack of interoperability. Consequently, to allow the communication of devices that rely on different communication technologies or devices that use different application protocols, an intermediate device is required, typically known as an IoT gateway. In addition, several solutions can be found in the literature, some based on academic research projects that aim at solving particular problems, while others consider bigger research and standardization proposals.</p><p>In [<xref rid="B43-sensors-19-00603" ref-type="bibr">43</xref>], an IoT gateway that enables the interoperability between Zigbee and GPRS protocols is presented, being tailored for applications composed of light, temperature and humidity sensors. A similar work is proposed by [<xref rid="B44-sensors-19-00603" ref-type="bibr">44</xref>], with an extended number of supported devices and protocols. This Smart IoT gateway allows a multifunctional configuration and supports protocols such as Zigbee, RFID and RS485. Furthermore, considering the popularity of smartphones, a smartphone gateway is proposed in [<xref rid="B45-sensors-19-00603" ref-type="bibr">45</xref>]. It supports several protocols like Wi-Fi, ANT+, Bluetooth, NFC, ZigBee and 6LoWPAN. A similar approach is followed on [<xref rid="B46-sensors-19-00603" ref-type="bibr">46</xref>], being presented a smartphone-centric solution on which the main links supported on the connection to sensors are based on BLE and IPv6. Furthermore, on [<xref rid="B47-sensors-19-00603" ref-type="bibr">47</xref>], a wireless IoT gateway is proposed, mainly supported on APIs composed of Restful [<xref rid="B48-sensors-19-00603" ref-type="bibr">48</xref>] web services. The gateway architecture, besides the REST API, includes dynamic device discovery in order to allow the insertion or removal of devices and a management connection module to handle devices that do not support REST.</p><p>Besides these academic research works, several standards that specify the deployment of IoT gateways for supporting M2M/IoT services have been developed. One of the most relevant ones is the OneM2M [<xref rid="B49-sensors-19-00603" ref-type="bibr">49</xref>], that has been developed with the participation of important standard development organizations and consortiums (including, for instance, ETSI, TIA and Broadband forum), and powerful companies (e.g., Cisco, Intel, Samsung, and Ericsson). OneM2M provides a horizontal platform that supports secure, reliable and efficient [<xref rid="B20-sensors-19-00603" ref-type="bibr">20</xref>] operations of multiple IoT/M2M services, particularly those relying on REST APIs. It supports multiple existing application protocols such as HTTP, CoAP and MQTT, and communication technologies such as ZigBee, Bluetooth, WiFi and Cellular networks on the sensing domain. To turn agile and normalize the management operations, OneM2M also supports the OMA-DM and BBF TR-069 protocols. Other turnkey solutions are available, being differentiated by the application protocols and communications technologies that they support. Intel [<xref rid="B50-sensors-19-00603" ref-type="bibr">50</xref>] provides a gateway that supports protocols such as MQTT, WiFi, VPN, Bluetooth, Cellular technologies and Zigbee, but also Serial and USB interfaces. SmartM2M [<xref rid="B51-sensors-19-00603" ref-type="bibr">51</xref>] supports HTTP, COAP, Cellular technologies, Zigbee, Bluetooth and Wifi. The Lightweight M2M (LWM2M) [<xref rid="B52-sensors-19-00603" ref-type="bibr">52</xref>] supports COAP and 6LowPAN technologies.</p><p>In sum, we can find a wide range of IoT gateways, some specially designed for certain applications, while others try to offer an horizontal integration of a diversity of IoT/M2M protocols and communication technologies. In common, they share the goal of creating an integrated IoT platform that could support multiple applications, protocols and standards. However, none of them fulfill completely the requirements of the SheepIT project, mainly in what concerns the local support of application-level services, such as an improved localization mechanism and system management. Even if some of those solutions could be customized, the cost of such integration could be economically unaffordable. Furthermore, and despite the great advantages that a fully integrated IoT/M2M gateway could offer, the resources that it takes can be superfluous considering the intelligent farming scenario, where the simplicity, low cost and high autonomy are the key features.</p></sec></sec><sec id="sec2dot2-sensors-19-00603"><title>2.2. Animal Monitoring Platforms</title><p>The monitorization of animals, namely sheep, is one of the main goals of SheepIT. There are several solutions available for different animal breeds, both in the literature and commercial domains. Typically, these solutions are split into two main groups: location monitoring and behaviour/activity monitoring. The former one allows farmers to keep track of animals and thus infer preferred pasturing areas, grazing times or even detect absent animals. The latter group focuses on detecting the type and duration of an animal&#x02019;s activities, such as resting, eating or running. Albeit both kinds of monitoring tasks are relevant for the context of SheepIT, activity monitoring is particularly important since it is the basis of the conditioning mechanism that it implements.</p><p>The monitorization of animals&#x02019; locations was one of the first technologies implemented in the livestock sector. The unpopularity of shepherds&#x02019; profession, together with the demanding livestock productivity, has led to the deployment of automated solutions for monitoring the grazing areas and duration. Consequently, several solutions arose to address such issue, being the Global Navigation Satellite Systems (GNSS), especially the Global Positioning System (GPS), the most popular technology used. Some examples are the Australian OzTrack platform that allows to upload GPS gathered data (evaluated with on crocodiles) [<xref rid="B53-sensors-19-00603" ref-type="bibr">53</xref>], the e-Pasto platform that offers an application to monitor the location of cattle grazing on mountains [<xref rid="B54-sensors-19-00603" ref-type="bibr">54</xref>] and the Digitanimal [<xref rid="B55-sensors-19-00603" ref-type="bibr">55</xref>], a solution that offers a vast inventory of GPS-based devices for monitoring the location of different animal species (e.g., cattle, goats, sheep, dogs, etc.). These solutions share the use of GPS and resort on web platforms and/or mobile apps to interact with the user. However, they only perform monitorization, and thus still require the use of expensive physical fences. To suppress such a need, some solutions proposed the addition of a virtual mechanism to the existent localization solutions. Two relevant examples are the eShepherd solution [<xref rid="B56-sensors-19-00603" ref-type="bibr">56</xref>] applied to grazing cows, and the NoFence platform, developed specially for goats [<xref rid="B57-sensors-19-00603" ref-type="bibr">57</xref>]. This later one, available commercially, was tested both on sheep [<xref rid="B58-sensors-19-00603" ref-type="bibr">58</xref>] and lambs [<xref rid="B59-sensors-19-00603" ref-type="bibr">59</xref>], and the conclusions point to the existence of technical issues and several difficulties on teaching sheep to stay inside the virtual fence. Thus, there are still improvements that must be made in this area.</p><p>Despite the evolution of GPS technology and developments on energy harvesting, duty-cycle and sensor fusion techniques, to reduce the power consumption and increase device&#x02019;s autonomy, the impact of GPS location is still very relevant. One alternative that we consider interesting for animal monitoring, is the use of RSSI. As it is present on most Radio Frequency (RF) technologies, its deployment would reduce energy consumption and contribute to the reduction of the cost and size of the hardware, which are key factors. Such use is reported on Nadimi et al. [<xref rid="B60-sensors-19-00603" ref-type="bibr">60</xref>] and Huirc&#x000e1;n et al. [<xref rid="B61-sensors-19-00603" ref-type="bibr">61</xref>], when applied to cattle location monitoring. Despite being an attractive solution, these works revealed a still significant immaturity of this kind of solutions, particularly concerning the lack of precision. Thus, there is still an open research opportunity in this area. Despite not being addressed in the scope of this paper, it is a goal of the SheepIT project, and thus, it was taken into account in the design of the solution.</p><p>Concerning the behaviour and activity monitoring, the most usual automated approaches are based on accelerometry and audiometry. Tri-axial accelerometers allow measurement of both static and dynamic accelerations, which, after being combined, processed and analyzed, permit to distinguish different kinds of animal behaviours and activities. Furthermore, these data can be stored and processed through advanced and powerful processing mechanisms, as Machine Learning (ML) algorithms, allowing the extraction of additional knowledge, not directly available on raw&#x02019;s sensor data.</p><p>A few practical examples are the study of activity patterns of Griffon Vultures [<xref rid="B62-sensors-19-00603" ref-type="bibr">62</xref>], the classification of goats activity [<xref rid="B63-sensors-19-00603" ref-type="bibr">63</xref>], the classification of cattle activity [<xref rid="B64-sensors-19-00603" ref-type="bibr">64</xref>,<xref rid="B65-sensors-19-00603" ref-type="bibr">65</xref>,<xref rid="B66-sensors-19-00603" ref-type="bibr">66</xref>] and the classification of sheep behaviour [<xref rid="B67-sensors-19-00603" ref-type="bibr">67</xref>,<xref rid="B68-sensors-19-00603" ref-type="bibr">68</xref>,<xref rid="B69-sensors-19-00603" ref-type="bibr">69</xref>]. Despite a few adaptations, necessary to accommodate the specificities of the application scenarios (i.e., the animal breed whose behaviour is to be studied), all the works rely on a similar approach, namely on gathering field data and transmitting it to computational platforms with advanced processing capabilities. The existing solutions differ mainly on the mechanisms they use to gather the data (through WSNs, external memories, cellular technologies) and on the algorithms they use to process the data (Machine Learning classifiers, Artificial Neural Networks). SheepIT requires that the behaviour detection must be carried out in Real-Time, and thus must be deployed at the box placed on the animals, therefore resulting in low-cost and low-power hardware, impairing the use of the advanced data processing mechanisms carried out by the aforementioned works.</p><p>The inherent advantages offered by animal monitoring activities to livestock productivity has led to the emergence of several commercial solutions. Some relevant examples are CowScout [<xref rid="B70-sensors-19-00603" ref-type="bibr">70</xref>] and Cowlar [<xref rid="B71-sensors-19-00603" ref-type="bibr">71</xref>], that aim at monitoring and quantifying the activity of cows in order to improve the lactation and insemination processes. However, these commercial solutions are scarce in details and it is only possible to state that they allow detecting animal activity, probably relying on accelerometers&#x02019; data.</p><p>In summary, there are several solutions that tackle some individual (or group of) issues that SheepIT aims to solve. <xref rid="sensors-19-00603-t001" ref-type="table">Table 1</xref> summarizes the most relevant solutions surveyed. As observed, none of the presented solutions is capable of detecting and conditioning sheep&#x02019;s posture while grazing. An additional comparative study of some of the presented solutions is given by Nobrega et al. [<xref rid="B72-sensors-19-00603" ref-type="bibr">72</xref>].</p></sec></sec><sec id="sec3-sensors-19-00603"><title>3. IoT-Based Stack Architecture for Intelligent Farming Solutions</title><p>The solution developed in the scope of the SheepIT project aims at, on the one hand, supporting the integration of a set of sensors into mobile nodes coupled to animals and, on the other hand, supporting the integration of a set of static sensors distributed along vineyards for monitoring plants and soil parameters.</p><p>The requirements imposed by the uncertainty of animals&#x02019; locations, their extremely gregarious behaviour and the effect of the terrain relief in the radio coverage, lead to the design of a new solution, from the IoT devices to be deployed, up to the IoT communication network. In this section we present the overall system architecture, focusing on devices&#x02019; operation and communication network.</p><p><xref ref-type="fig" rid="sensors-19-00603-f003">Figure 3</xref> illustrates the overall system architecture. Besides the novelty introduced by some elements (e.g., collar device carried by sheep), the system&#x02019;s architecture follows a typical IoT architecture, being composed of two main modules. The first is a WSN that implements all the critical local functions of the system, such as the animal behaviour monitoring and conditioning. Additionally, it enables the sensor data gathering that is then forwarded to the user. The second module concerns the CP, hosted for instance on the cloud, and that has as functions, message brokering, data analysis, data storage and data display, the latter through appropriate user interfaces. The following subsections tackle both modules, as well as devices and messages exchanged.</p><sec id="sec3dot1-sensors-19-00603"><title>3.1. WSM and M2M Components</title><p>The WSN is composed of mobile nodes for animal monitoring and fixed nodes for farming sensing, for instance, temperature sensors, weather forecast stations, humidity sensors and light sensors. Animal sensors (e.g., neck inclination, distance to ground) are implemented on a collar coupled to the animals&#x02019; neck. Besides monitoring and condition the animals&#x02019; behaviour locally, the sensed data is reported to the network through a radio transceiver. Further details on collar&#x02019;s operation and design are given in [<xref rid="B74-sensors-19-00603" ref-type="bibr">74</xref>].</p><p>The fixed nodes, dubbed beacons, besides implementing the needed farming monitoring sensors (adjustable accordingly to the specific needs of the farm), act as infrastructural networking devices. Consequently, they are responsible for collecting the data sent from sheep sensors and for relaying it through neighboring beacons in order to ensure its delivery to one or more aggregating points (gateways). Additionally, they ensure the network synchronization and their periodic communications are designed to allow the establishment of a RSSI-based localization mechanism [<xref rid="B74-sensors-19-00603" ref-type="bibr">74</xref>].</p><p>The M2M communications within our WSN are implemented by a protocol stack (illustrated in <xref ref-type="fig" rid="sensors-19-00603-f004">Figure 4</xref>) specifically designed to satisfy the SheepIT requirements [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>,<xref rid="B24-sensors-19-00603" ref-type="bibr">24</xref>]. Despite having this particular project in mind, the stack design was driven by more general goals, aggregating the traffic requirements of several applications related to farming management and supervision. Our approach follows a four-layer architecture (Physical Layer, MAC Layer, Transportation Layer and Application Layer) since it is the one that enables a straightforward match between the defined requirements and each one of the layers. Below, we outline the layers that compose the stack as well as their purpose.</p><p>Regarding the Physical Layer, the major constraints are associated to the wine-growing and similar lands, mainly in the Douro&#x02019;s region (Portugal) where the terrain is very rugged, with a set of valleys and irregularities carved in the landscape. Such constraints stopped us from considering existing communication standards with Physical Layers based on higher frequencies (e.g., IEEE 802.11, BLE and some implementations of IEEE 802.15.4 and ZigBee). As, theoretically, lower frequencies (and thus higher wavelengths) present better propagation performance, our Physical Layer is based on radio transceivers operating preferably at the ISM band of 433 MHz. Even so, and due to the popularity of the 868 MHz band, we recently added this option.</p><p>The MAC Layer was an object of careful design due to its implication on the power consumption and consequent autonomy of networking devices, particularly in the case of mobile nodes (sheep collars). The strategy proposed approaches a Time-Triggered (TT) architecture, which means that relevant tasks and communications are executed following a predetermined scheduling. Hence, this scheduling may be defined aiming at optimizing the entire system&#x02019;s operation. Regarding the wireless communications, considering that most of the communications are periodic in nature and in order to avoid collisions, packets losses and consequent waste of bandwidth and energy consumption with retransmissions, permanent-state communications are TDMA-based. This communication scheme is complemented with CSMA-based sporadic communications, used for events such as device&#x02019;s registration on the network (after a system boot, after a reset or after a long period of non-reporting). To this end, a periodic-based structure is used, on which a sequence of micro-cycles (&#x000b5;C) form a Macro-Cycle (MC) that is repeated over time. Each type of &#x000b5;C has a particular purpose and, accordingly to that purpose, a TDMA/CSMA MAC policy. As depicted in <xref rid="sensors-19-00603-t002" ref-type="table">Table 2</xref>, three types of &#x000b5;C are currently defined, albeit more can be easily added if required.</p><p>Independently of the type of &#x000b5;C considered, all respect a common structure that is represented in <xref ref-type="fig" rid="sensors-19-00603-f005">Figure 5</xref>. They start with a <italic>Synchronization Window</italic> (SW), during which each beacon sends a synchronization message carrying its identification and information about the current type of &#x000b5;C. This information is used by the remaining devices to synchronize with the network and allows the collection of RSSI information from multiple devices, crucial for the localization algorithm. Following the SW, there is a <italic>Turn Around Window</italic> (TAW) for processing purposes, namely for acquiring and processing sensor data and preparing subsequent tasks. Finally, the <italic>Variable Traffic-type Window (VTW)</italic> is where the actual communications do occur. More details about this communication scheme may be found in [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>].</p><p>To enable the implementation of the aforementioned communication scheme, several messages were defined, composing our Message Transport (MT) module. <xref ref-type="fig" rid="sensors-19-00603-f006">Figure 6</xref> illustrates the existing interactions between networking elements for C2B and B2B &#x000b5;C. As explained before, independently of the &#x000b5;C type, there exists a initial phase, the SW, where beacons broadcast <italic>BeaconSynchro</italic> (BS) messages. During this window, all devices are awake and, upon receiving these messages, they are all able to identify the starting and type of the new &#x000b5;C, triggering the necessary calculations in order to know if, when and what they should transmit. This allows constrained devices (i.e., collars) to enter in energy-saving modes right after finishing their tasks. After this initial phase, the exchanged messages depend on the type of the &#x000b5;C. For the C2B case, the remainder of the &#x000b5;C is devoted to the transmission of <italic>Collar-to-Beacon</italic> (C2B) messages, one per collar and per time slot. Only beacons listen to these messages, being the remaining collars in power-saving modes. On the other hand, if the &#x000b5;C is of type 3 (B2B), the messages exchanged are called <italic>Beacon-to-Beacon</italic> (B2B) and are also transmitted in a time multiplexing way, being assigned to each beacon one or more time slots, accordingly to the maximum number of beacons and to the routing scheme defined.</p><p>To enable a certain level of network dynamism, particularly the insertion and removal of devices while the system is running, a Network Manager (NM) module is included. Additionally, since some sensors are coupled to animals and thus movable on uneven terrain, it is of crucial importance that the gateway monitors sensor communications and detects missing animals or malfunction devices, such that they can be excluded from the network. <xref ref-type="fig" rid="sensors-19-00603-f007">Figure 7</xref> exemplifies the exchanged messages when a new collar needs to be registered on the network&#x02019;s system. As these events are sporadic, a specific CSMA-based &#x000b5;C (PR), is reserved for this kind of events. The collar initializes a new registration procedure by sending a <italic>Registration Request</italic> with information about the serial number of the collar and the identification of the animal (i.e., animal identification information present in their stomach bulb transponder [<xref rid="B76-sensors-19-00603" ref-type="bibr">76</xref>]). These requests are propagated through the entire network until reaching the gateway. The gateway validates the request and, if possible, sends a <italic>Registration Reply</italic> with the network identification and the serial number that is propagated backwards to the collar.</p><p>The Routing Manager establishes the active routing scheme (within the beacon infrastructure). Beacons act as routers and they establish adjacent relations with their neighbors, based on the signal intensity monitoring. To simplify the implementation, currently, the protocol just considers one type of routing metrics, namely the distance between devices (shorter distances, smaller routing cost).</p><p>The Security Manager (SM) needs to ensure that only the data sent by allowed devices is accepted. To do so, besides the sensor registration scheme described in the scope of the NM module, a specific code, associated with the property where the devices are being used, is incorporated on all messages. This value is used by devices to know if a certain message can be accepted or not. The registration scheme allows the infrastructure to authorize new sensors and request corresponding schedules.</p><p>The Application Layer implements several farm monitoring applications, mainly envisaged for vineyard and orchards scenarios. It includes animal sensing (SheepIT is the starting point example), plants and weather monitoring, as well as the configuration of several operational details of the application. This diversity of applications allows to offer an integrated monitoring platform for intelligent farming applications, supporting the management and decision making activities within a farm.</p></sec><sec id="sec3dot2-sensors-19-00603"><title>3.2. Gateway</title><p>As depicted in <xref ref-type="fig" rid="sensors-19-00603-f003">Figure 3</xref>, the interface between the WSN, the CP and the User Interface domains is carried out by the gateway. In addition to the standard gateway functionality, which is essentially joining networks to allow devices to intercommunicate irrespectively of the network where they belong, the SheepIT gateway supports additional services developed to address the specific requirements of farming applications, as referred to in <xref ref-type="sec" rid="sec2dot1dot7-sensors-19-00603">Section 2.1.7</xref>.</p><p>Therefore, the most elemental functionality of the gateway is forwarding data between the WSN, the CP and the User Interface. This activity requires minimal processing, consisting essentially in decoding the data frames coming from each one of the interfaces, placing the data in a local database and triggering the processes responsible for fetching the data and sending it to the target interface(s).</p><p>Many farms are located in remote places and, as such, permanent access to the Internet cannot be considered as granted. Moreover, there are some services that require low response times and, as such, it is essential to deploy them as close to the data sources as possible. Consequently, the gateway should support locally at least a few critical services, namely:<list list-type="bullet"><list-item><p><bold>Alarms:</bold> alarms should be raised as quickly as possible in the event of anomalous situations. The gateway collects data from all the animals, so it has a global view that allows it to correlate the received data, thus being a privileged place to detect abnormal situations. For example, if all animals suddenly exhibit a running behavior that may indicate that the flock may be under attack of a predator, and thus an alarm should be raised. A sheep that disappears from all the beacons can have escaped, and so an alarm should also be raised;</p></list-item><list-item><p><bold>Local management:</bold> local web interface, to allow performing on-site administration tasks (e.g., defining the height at which animals are allowed to feed, if the restrictions are active or not, etc.), consult real-time and historical state data, among others. These operations shall be possible through a WiFi or Bluetooth enabled PDA or smartphone, without requiring access to the CP&#x02019;s web interface;</p></list-item><list-item><p><bold>Technical management:</bold> local web interface, to enable technical interventions, such as tuning the communication parameters to the specific characteristics of the exploration (kind of terrain, dimension of the flock, etc.), as well as to allow system-level debug via the network.</p></list-item></list></p><p>The number of gateway devices is expected to be small (just one, in most of the cases). Moreover, they are not moved frequently and are usually deployed in accessible places. Therefore, we assume that gateways are not subject to the stringent power, size and energy consumption limitations that beacons, and particularly collars, face. Thus, gateways can use more powerful hardware, both in terms of processing and storage capacity, which is essential to enable the realization of the services mentioned above. Considering the complexity of the services to be supported, we based our proposal on an Embedded PC platform running Linux. As illustrated in <xref ref-type="fig" rid="sensors-19-00603-f008">Figure 8</xref>, the gateway comprises Internet and WiFi/Bluetooth, made available through suitable network interface cards. The Gateway also contains a beacon module, interconnected with the Embedded PC via a serial interface. The beacon module ensures compliance with the communication scheme of the WSN. Combined, these interfaces abstract the communication services offered to the local services.</p><p><xref ref-type="fig" rid="sensors-19-00603-f009">Figure 9</xref>a illustrates the gateway&#x02019;s WLAN interface processing flow. After system initialization, which includes initialization of data structures and hardware, the system waits for the arrival of frames through the serial port. When a new frame arrives it is subject to pre-processing, which includes validation, parsing and time-stamping. The processed data is then stored on a local database. Afterwards, the processing flow forks into two different lines. The left side one corresponds to the Localization procedure. To improve the accuracy and stability, the localization procedure filters and combines the RSSI data from both slaves and beacons [<xref rid="B74-sensors-19-00603" ref-type="bibr">74</xref>]. The improved animal&#x02019;s estimated position is then stored on the local database. The right side flow corresponds to the alarm generation. The incoming sensor data is analyzed to detect abnormal behaviors. Relevant data includes localization, posture and activity type, penalization counters, inertial sensors readings, among others. A historical record of this data is maintained for each one of the animals, and the algorithms can access both individual and global data. Different algorithms can be applied, according to the specific use-case requirements, but common alarms include panic situations and missing animals. Eventual alarm events are stored at the local database. When the incoming data is completely processed, the relevant fields (sensors, timestamp, error counters, alarms, etc.) are fetched from the database and sent to the CP. The CP is designed to receive data using the AMQP protocol, thus, the gateway implements this protocol at the Internet interface. Further details on the CP operation are given in <xref ref-type="sec" rid="sec3dot3-sensors-19-00603">Section 3.3</xref>.</p><p><xref ref-type="fig" rid="sensors-19-00603-f009">Figure 9</xref>b illustrates the operation of the technical and management web interfaces. After system initialization, the gateway awaits for the arrival of a frame from the WiFi/Bluetooth interface. When a frame arrives, it is validated and parsed. Frames can be of one of two classes, <italic>GetData</italic> and <italic>SetData</italic>. <italic>GetData</italic> frames are sent by the user device and correspond to data requests. Conversely, SetData frames correspond to parameter update commands. When a <italic>GetData</italic> frame is received, the Gateway fetches the corresponding data from the internal database and reports it via the same interface. <italic>SetData</italic> frames correspond to modifications to the system operation (e.g., activate or deactivate the posture control, set the height below which animals are allowed to feed, define the radio transmission power, etc.). When one of these frames is received, the corresponding parameters are stored on the local database and then forwarded to the WSN, thus reaching beacons and collars.</p></sec><sec id="sec3dot3-sensors-19-00603"><title>3.3. Computational Platform (CP)</title><p>The CP (<xref ref-type="fig" rid="sensors-19-00603-f010">Figure 10</xref>) receives, processes and stores the data gathered by facilities&#x02019; gateways and makes their information available in a summarized way to the human operator. In order to guarantee scalability with the growth of the number of facilities, animals and equipment, it was designed using an AMQP broker that allows the subscription of message topics received by several entities of the solution. The topics distributed by the RabbitMQ-based broker are subscribed by a data-processing engine, the Apache Spark [<xref rid="B77-sensors-19-00603" ref-type="bibr">77</xref>], that persists real-time data stream into the platform&#x02019;s data repository. Moreover, such infrastructure allows the incorporation of data mining and machine learning libraries [<xref rid="B23-sensors-19-00603" ref-type="bibr">23</xref>], which can be used to predict specific and relevant events such as potential diseases on animals or vines/orchards. Such data processing tasks are implemented as background tasks, accessing the repository using the previously persisted data.</p><p>The processing framework was enabled with a rule management server (Drools [<xref rid="B78-sensors-19-00603" ref-type="bibr">78</xref>]) that also subscribes broker stream topics in order to implement a central alarm system that can be used complementary to the alarm generator module implemented on the gateway.</p><p>Finally, the CP also includes a RESTful API in order to allow a smooth deployment of web and mobile user interfaces. Additional details on CP&#x02019;s implementation can be found in [<xref rid="B23-sensors-19-00603" ref-type="bibr">23</xref>].</p></sec></sec><sec id="sec4-sensors-19-00603"><title>4. Experimental Evaluation</title><p>To evaluate the feasibility of the proposed solution, we need to demonstrate that our approach complies with all identified requirements. In [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>] the requirements and design of the communication mechanism, especially regarding the Physical and MAC Layers were addressed and theoretically evaluated. This evaluation included the validation of timing and energy consumption constraints, being demonstrated by the theoretical feasibility of our approach. Later on, in the work of Temprilho et al. [<xref rid="B24-sensors-19-00603" ref-type="bibr">24</xref>], the solution was transposed for a full M2M communication stack, although the focus was the practical implementation of the Physical and MAC Layers. Furthermore, this implementation was tested and validated under controlled conditions (i.e., on laboratory). Finally, in [<xref rid="B23-sensors-19-00603" ref-type="bibr">23</xref>], a particular use case of the presented mechanism was used to collect real data such that we could resort to ML algorithms as a tool for achieving a suitable and efficient control posture mechanism. This use case required a specific configuration of the network in order to allow gathering data with higher rates than the ones required during normal system operation. Albeit further tests shall be performed in order to assess the feasibility of the proposed solution under real conditions, the results of these first works are promising.</p><p>As the successful deployment of the solution also depends on the gateway deployment, this paper focuses on this issue. Thus, the following results are a complement and extension to the previous works. Explicitly, we are interested in assessing if the design and implementation of the gateway are suitable and capable of supporting the processing and timing needs of the application, particularly when the number of devices increases.</p><sec id="sec4dot1-sensors-19-00603"><title>4.1. Evaluation Scenario Conditions</title><p>We are interested in evaluating the behavior of the gateway under normal system operation conditions. Such conditions were defined in previous works considering the requirements and the design of the WSN [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>], and the temporal conditions defined and explained in [<xref rid="B24-sensors-19-00603" ref-type="bibr">24</xref>]. As these decisions are directly related with animal husbandry and livestock conditions, they were supported by partners of the project, namely the Agrarian School Of Viseu and Ramos Pinto, Lda. In summary, those conditions are:<list list-type="bullet"><list-item><p>The &#x000b5;C duration is set to 6 s (due to localization needs) and the MC duration to 60 s (the needed data report periodicity);</p></list-item><list-item><p>The arrangement of one MC is defined as follows: one &#x000b5;C type 1 (PR), one &#x000b5;C type 2 (C2B) and the remaining ones are reserved for &#x000b5;C type 3 (B2B);</p></list-item><list-item><p>The area to be covered is set to 10 ha, since, according to the practical experience of our partners, it is the average vineyard size of potential users of the solution;</p></list-item><list-item><p>The number of beacons needed to cover such area is 20;</p></list-item><list-item><p>The max number of collars in one property is fixed to 1000;</p></list-item><list-item><p>The serial port baudrate is set to 115,200;</p></list-item><list-item><p>The gateway is connected to the Internet through an Ethernet connection.</p></list-item></list></p><p>To implement the gateway an Orange PI Zero (Shenzhen Xunlong Software CO (Guangdong, China)) [<xref rid="B79-sensors-19-00603" ref-type="bibr">79</xref>] was chosen, due to its low cost and low energy consumption. This device features an H2 Quad-core Cortex-A7 H.265/HEVC 1080p, a 512MB DDR3 SDRAM, runs a Linux-based Armbian operating system and it costs around 10&#x020ac;. Furthermore, the gateway application was developed using the &#x0201c;C&#x0201d; programming language and relies on a multi-threading architecture.</p><p>Furthermore, as at the present stage of the project it is unpractical to perform the necessary tests using the maximum number of collars defined for a single property (1000), we implemented a generator of traffic that runs over a Linux platform and sends periodically (every MC), the expected data that would be generated by a defined number of collars and 20 beacons. That allows to easily evaluate the behaviour of the gateway under different traffic conditions.</p><p>In order to ensure that the gateway is able to receive, process and publish all the data without congestion, and consequently without losing data, we measured the duration of all tasks, from the instant that the data sent by a beacon is received by the gateway via the serial port, until the moment that it is published into the broker. Those tasks are: (i) the time needed to receive all the data through the serial port interface; (ii) the processing time of the data received, including the time needed to store it in a shared memory and the time spent by the localization algorithm; and (iii) the duration of the task responsible for generating the messages (in JSON format) to be sent over the AMQP protocol and for publishing them into the broker. It shall be noted that when publishing messages through the AMQP library installed on the gateway, the measured time includes the time needed for generating a message, the propagation time of those messages through the Internet until reaching the broker, and the propagation of an acknowledge message sent by the broker after receiving the message.</p><p>Albeit the worst case scenario is expected to occur with the maximum number of collars (1000), in order to understand the impact of increasing the number of collars, we relied on the implemented traffic generator to evaluate how those times evolve considering different number of collars (100, 200, 500 and 1000). For each one of these, we performed experiments that lasted for 300 MCs, thus around 5 h.</p><p><xref rid="sensors-19-00603-t003" ref-type="table">Table 3</xref> summarizes the medians of the durations measured. For improving readability, we split data into Beacons and Collars. Besides the duration of the tasks previously mentioned, we also present the cumulative time spent by all tasks. As it can be observed, the time spent by the serial port to receive the data is the most restricting task with the conditions defined, and naturally, it increases linearly with the increasing number of collars. The same happens with the collars processing task as well as with the task responsible for publishing the data into the broker.</p><p>However, as can be seen in <xref ref-type="fig" rid="sensors-19-00603-f011">Figure 11</xref>, there are fluctuations with an important impact on the cumulative duration of the processing tasks. Thus, it is important to evaluate the worst case scenario, i.e., consider the maximum durations measured for each task. <xref rid="sensors-19-00603-t004" ref-type="table">Table 4</xref> summarizes those measurements. As can be seen, even considering the worst case measurements, the cumulative duration of all tasks evaluated is smaller than 6 s, thus well quite below the duration of an MC.</p></sec><sec sec-type="discussion" id="sec4dot2-sensors-19-00603"><title>4.2. Discussion</title><p>As tackled in the previous section, the implemented gateway does not cause relevant traffic congestion considering the evaluation scenario defined. However, there are a few aspects that shall be analyzed in future works, namely:<list list-type="bullet"><list-item><p>The tests performed considered an Ethernet connection between the gateway and the CP. However, most of real scenarios shall be based in cellular connections (2G, 3G, 4G). Since some of these kinds of connections present bandwidth and latency constraints, we are expecting higher values on the time needed to upload the data to the broker. Thus, a deeper study shall be performed in order to assess the minimum bandwidth necessary to avoid congestion on the gateway;</p></list-item><list-item><p>Receiving data from the serial port is the most predominant delay source, particularly when the number of devices increases. Possible solutions include increasing the baudrate or use other interfaces (e.g., SPI);</p></list-item><list-item><p>This work did not consider the impact of additional modules that interact with the local database. For instance, the local alarm generator and the local web socket modules may increment the processing overhead. If it turns out to be a problem, it is possible to update the Gateway&#x02019;s computing microprocessor, without a significant impact in terms of price and energy consumption;</p></list-item><list-item><p>The fluctuations observed may be a result of other concurrent tasks of the operating system. Consequently, future work shall consider the adoption of the real-time services provided by Linux;</p></list-item><list-item><p>Evaluating the feasibility of the gateway&#x02019;s implementation is a step forward in the evaluation of the entire IoT-based stack proposed for intelligent farming solutions. Notwithstanding, there is still work to be done on such stack. Particularly, the network, routing and security modules shall be further developed and evaluated;</p></list-item><list-item><p>There is also a critical requirement that still needs to be evaluated, particularly the collar&#x02019;s autonomy. On [<xref rid="B22-sensors-19-00603" ref-type="bibr">22</xref>], a theoretical evaluation of such autonomy was presented considering a pre-prototype version of the solution, being expected 3224 h of autonomy with a battery of 2600 mAh. However, we believe that this may decrease under real conditions.</p></list-item></list></p></sec></sec><sec sec-type="conclusions" id="sec5-sensors-19-00603"><title>5. Conclusions</title><p>The IoT concept arose as a consequence of the exponentially increasing number of devices that are connected to the Internet. Nowadays, we can find IoT devices and applications in almost all sectors of the society. This wide range of applications, with distinct requirements and constraints, has led to the development of a plethora of protocols, standards and communication stacks, each one trying to solve specific requirements.</p><p>The popularity of the Internet rendered IP-based protocols to be the most popular ones. However, despite the efforts made to reduce the impact of the overhead associated with those solutions, as it happens with the 6LoWPAN AL, such solutions are still unsuitable for several energy constrained IoT applications. A practical example is addressed in the scope of the SheepIT project.</p><p>Using SheepIT&#x02019;s requirements as a starting point, an IoT-based stack for intelligent farming solutions is proposed, from the Physical to the Application Layer levels. The overall system architecture includes a WSN, with a set of mobiles nodes, a set of static nodes, a gateway and a computational platform. Previous works addressed essentially the WSN domain, namely devices and communication mechanisms. In the scope of this paper, the gateway node was presented, being the functional modules highlighted. Furthermore, to evaluate the feasibility of its implementation, the duration of their processing tasks was evaluated for a number of different devices&#x02019; data. The results show that the gateway is able to transmit all the data gathered within the duration of an MC, even considering the worst case measurements and the use of low-cost and low-power hardware.</p><p>Future work shall include a similar evaluation on a 2G, 3G and 4G connection between the gateway and the Internet. We expect a significant increase in the latency when publishing the data into the broker, particularly due to the lower bandwidth of such a solution as well as its lower reliability. In addition, the impact of the local services shall be evaluated.</p><p>Additionally, and regarding the proposed stack, a more detailed analysis shall be performed to the modules of the Transportation Layer not addressed in the scope of this paper. Specifically, the routing manager and the security manager modules shall be detailed and evaluated. Finally, all the M2M components shall be subject to intensive experiments under real deploying conditions.</p></sec></body><back><ack><title>Acknowledgments</title><p>We would like to thank Agrarian School of Viseu (ESAV-IPV) and Ramos Pintos, Lda., for all the support and expertise shared concerning the livestock and wine-growing domains, crucial for defining the presented IoT architecture.</p></ack><notes><title>Author Contributions</title><p>L.N. wrote the paper and participated in the design and implementation of the solution. P.G. and P.P. contributed to the design of the solution and reviewed the paper. J.P. was part of the implementation team and participated in the design of the experiments.</p></notes><notes><title>Funding</title><p>This work is funded by FCT/MEC through national funds and when applicable co-funded by FEDER&#x02014;PT2020 partnership agreement under the project UID/EEA/50008/2019.</p></notes><notes notes-type="COI-statement"><title>Conflicts of Interest</title><p>The authors declare no conflict of interest. The founding sponsors had no role in the design of the study; in the collection, analyses, or interpretation of data; in the writing of the manuscript, and in the decision to publish the results.</p></notes><ref-list><title>References</title><ref id="B1-sensors-19-00603"><label>1.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Tuwanut</surname><given-names>P.</given-names></name><name><surname>Kraijak</surname><given-names>S.</given-names></name></person-group><article-title>A survey on IoT architectures, protocols, applications, security, privacy, real-world implementation and future trends</article-title><source>Proceedings of the 11th International Conference on Wireless Communications, Networking and Mobile Computing</source><conf-loc>Shanghai, China</conf-loc><conf-date>21&#x02013;23 September 2015</conf-date></element-citation></ref><ref id="B2-sensors-19-00603"><label>2.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Ray</surname><given-names>P.P.</given-names></name></person-group><article-title>A survey on Internet of Things architectures</article-title><source>J. King Saud Univ. Comput. Inf. Sci.</source><year>2018</year><volume>30</volume><fpage>291</fpage><lpage>319</lpage><pub-id pub-id-type="doi">10.1016/j.jksuci.2016.10.003</pub-id></element-citation></ref><ref id="B3-sensors-19-00603"><label>3.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kidd</surname><given-names>P.T.</given-names></name></person-group><article-title>The role of the Internet of Things in enabling sustainable agriculture in Europe</article-title><source>Int. J. RF Technol.</source><year>2012</year><volume>3</volume><fpage>67</fpage><lpage>83</lpage></element-citation></ref><ref id="B4-sensors-19-00603"><label>4.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kwong</surname><given-names>K.H.</given-names></name><name><surname>Wu</surname><given-names>T.T.</given-names></name><name><surname>Goh</surname><given-names>H.G.</given-names></name><name><surname>Sasloglou</surname><given-names>K.</given-names></name><name><surname>Stephen</surname><given-names>B.</given-names></name><name><surname>Glover</surname><given-names>I.</given-names></name><name><surname>Shen</surname><given-names>C.</given-names></name><name><surname>Du</surname><given-names>W.</given-names></name><name><surname>Michie</surname><given-names>C.</given-names></name><name><surname>Andonovic</surname><given-names>I.</given-names></name></person-group><article-title>Implementation of herd management systems with Wireless Sensor Networks</article-title><source>IET Wirel. Sens. Syst.</source><year>2011</year><volume>1</volume><fpage>55</fpage><lpage>65</lpage><pub-id pub-id-type="doi">10.1049/iet-wss.2010.0057</pub-id></element-citation></ref><ref id="B5-sensors-19-00603"><label>5.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Llaria</surname><given-names>A.</given-names></name><name><surname>Terrasson</surname><given-names>G.</given-names></name><name><surname>Arregui</surname><given-names>H.</given-names></name><name><surname>Hacala</surname><given-names>A.</given-names></name></person-group><article-title>Geolocation and monitoring platform for extensive farming in mountain pastures</article-title><source>Proceedings of the 2015 IEEE International Conference on Industrial Technology</source><conf-loc>Seville, Spain</conf-loc><conf-date>17&#x02013;19 March 2015</conf-date></element-citation></ref><ref id="B6-sensors-19-00603"><label>6.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Rajandekar</surname><given-names>A.</given-names></name><name><surname>Sikdar</surname><given-names>B.</given-names></name></person-group><article-title>A survey of MAC layer issues and protocols for Machine-to-Machine communications</article-title><source>IEEE Internet Things J.</source><year>2015</year><volume>2</volume><fpage>175</fpage><lpage>186</lpage><pub-id pub-id-type="doi">10.1109/JIOT.2015.2394438</pub-id></element-citation></ref><ref id="B7-sensors-19-00603"><label>7.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Al-Fuqaha</surname><given-names>A.</given-names></name><name><surname>Guizani</surname><given-names>M.</given-names></name><name><surname>Mohammadi</surname><given-names>M.</given-names></name><name><surname>Aledhari</surname><given-names>M.</given-names></name><name><surname>Ayyash</surname><given-names>M.</given-names></name></person-group><article-title>Internet of things: A survey on enabling technologies, protocols, and applications</article-title><source>IEEE Commun. Surv. Tutor.</source><year>2015</year><volume>17</volume><fpage>2347</fpage><lpage>2376</lpage><pub-id pub-id-type="doi">10.1109/COMST.2015.2444095</pub-id></element-citation></ref><ref id="B8-sensors-19-00603"><label>8.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Sethi</surname><given-names>P.</given-names></name><name><surname>Sarangi</surname><given-names>S.R.</given-names></name></person-group><article-title>Internet of Things: Architectures, Protocols, and Applications</article-title><source>J. Electr. Comput. Eng.</source><year>2017</year><volume>2017</volume><fpage>9324035</fpage><pub-id pub-id-type="doi">10.1155/2017/9324035</pub-id></element-citation></ref><ref id="B9-sensors-19-00603"><label>9.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Naik</surname><given-names>N.</given-names></name></person-group><article-title>Choice of effective messaging protocols for IoT systems: MQTT, CoAP, AMQP and HTTP</article-title><source>Proceedings of the 2017 IEEE International Systems Engineering Symposium</source><conf-loc>Vienna, Austria</conf-loc><conf-date>11&#x02013;13 October 2017</conf-date></element-citation></ref><ref id="B10-sensors-19-00603"><label>10.</label><element-citation publication-type="book"><person-group person-group-type="author"><collab>IEEE Standard for Low-Rate Wireless Networks</collab></person-group><source>IEEE Std 802.15.4-2015 (Revision of IEEE Std 802.15.4-2011)</source><publisher-name>IEEE</publisher-name><publisher-loc>Piscataway, NJ, USA</publisher-loc><year>2016</year><fpage>1</fpage><lpage>709</lpage></element-citation></ref><ref id="B11-sensors-19-00603"><label>11.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Kushalnagar</surname><given-names>N.</given-names></name><name><surname>Montenegro</surname><given-names>G.</given-names></name><name><surname>Schumacher</surname><given-names>C.</given-names></name></person-group><article-title><italic>IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs): Overview, Assumptions, Problem Statement, and Goals</italic>; IETF RFC 4919</article-title><year>2007</year><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://tools.ietf.org/html/rfc4919">https://tools.ietf.org/html/rfc4919</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-31">(accessed on 31 January 2019)</date-in-citation></element-citation></ref><ref id="B12-sensors-19-00603"><label>12.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Shelby</surname><given-names>Z.</given-names></name><name><surname>Hartke</surname><given-names>K.</given-names></name><name><surname>Bormann</surname><given-names>C.</given-names></name></person-group><article-title>The Constrained Application Protocol (CoAP)&#x02014;IETF RFC 7252</article-title><year>2014</year><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://tools.ietf.org/html/rfc7252">https://tools.ietf.org/html/rfc7252</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-31">(accessed on 31 January 2019)</date-in-citation></element-citation></ref><ref id="B13-sensors-19-00603"><label>13.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Ritchie</surname><given-names>M.</given-names></name><name><surname>Chase</surname><given-names>J.</given-names></name><name><surname>Atwell</surname><given-names>M.</given-names></name><name><surname>Sadjadi</surname><given-names>S.</given-names></name><name><surname>Schloming</surname><given-names>R.</given-names></name><name><surname>Hat</surname><given-names>R.</given-names></name><name><surname>Conway</surname><given-names>A.</given-names></name><name><surname>Shaw</surname><given-names>S.</given-names></name><name><surname>Godfrey</surname><given-names>R.</given-names></name><name><surname>Sustrik</surname><given-names>M.</given-names></name><etal/></person-group><article-title>AMQP Advanced Message Queuing Protocol Protocol Specification License</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf">https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-26">(accessed on 26 January 2018)</date-in-citation></element-citation></ref><ref id="B14-sensors-19-00603"><label>14.</label><element-citation publication-type="web"><person-group person-group-type="author"><collab>OASIS</collab></person-group><article-title>MQTT Version 3.1.1</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-25">(accessed on 25 January 2018)</date-in-citation></element-citation></ref><ref id="B15-sensors-19-00603"><label>15.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Fielding</surname><given-names>R.</given-names></name><name><surname>Gettys</surname><given-names>J.</given-names></name><name><surname>Mogul</surname><given-names>J.</given-names></name><name><surname>Frystyk</surname><given-names>H.</given-names></name><name><surname>Masinter</surname><given-names>L.</given-names></name><name><surname>Leach</surname><given-names>P.</given-names></name><name><surname>Berners-Lee</surname><given-names>T.</given-names></name></person-group><article-title><italic>H</italic>ypertext Transfer Protocol&#x02013;HTTP/1.1&#x02014;IETF RFC 2616</article-title><year>1999</year><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://tools.ietf.org/html/rfc2616">https://tools.ietf.org/html/rfc2616</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-31">(accessed on 31 January 2019)</date-in-citation></element-citation></ref><ref id="B16-sensors-19-00603"><label>16.</label><element-citation publication-type="web"><person-group person-group-type="author"><collab>Sigfox</collab></person-group><article-title>Sigfox Technology Overview | Sigfox</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.sigfox.com/en/sigfox-iot-technology-overview">https://www.sigfox.com/en/sigfox-iot-technology-overview</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-25">(accessed on 25 January 2018)</date-in-citation></element-citation></ref><ref id="B17-sensors-19-00603"><label>17.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wang</surname><given-names>Y.P.E.</given-names></name><name><surname>Lin</surname><given-names>X.</given-names></name><name><surname>Adhikary</surname><given-names>A.</given-names></name><name><surname>Grovlen</surname><given-names>A.</given-names></name><name><surname>Sui</surname><given-names>Y.</given-names></name><name><surname>Blankenship</surname><given-names>Y.</given-names></name><name><surname>Bergman</surname><given-names>J.</given-names></name><name><surname>Razaghi</surname><given-names>H.S.</given-names></name></person-group><article-title>A Primer on 3GPP Narrowband Internet of Things</article-title><source>IEEE Commun. Mag.</source><year>2017</year><volume>55</volume><fpage>117</fpage><lpage>123</lpage><pub-id pub-id-type="doi">10.1109/MCOM.2017.1600510CM</pub-id></element-citation></ref><ref id="B18-sensors-19-00603"><label>18.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Ratasuk</surname><given-names>R.</given-names></name><name><surname>Mangalvedhe</surname><given-names>N.</given-names></name><name><surname>Ghosh</surname><given-names>A.</given-names></name><name><surname>Vejlgaard</surname><given-names>B.</given-names></name></person-group><article-title>Narrowband LTE-M system for M2M communication</article-title><source>Proceedings of the IEEE 80th Vehicular Technology Conference</source><conf-loc>Vancouver, BC, Canada</conf-loc><conf-date>14&#x02013;17 September 2014</conf-date></element-citation></ref><ref id="B19-sensors-19-00603"><label>19.</label><element-citation publication-type="web"><person-group person-group-type="author"><collab>LoRa Alliance</collab></person-group><article-title>A technical overview of LoRa and LoRaWAN</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.tuv.com/media/corporate/products_1/electronic_components_and_lasers/TUeV_Rheinland_Overview_LoRa_and_LoRaWANtmp.pdf">https://www.tuv.com/media/corporate/products_1/electronic_components_and_lasers/TUeV_Rheinland_Overview_LoRa_and_LoRaWANtmp.pdf</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-25">(accessed on 25 January 2018)</date-in-citation></element-citation></ref><ref id="B20-sensors-19-00603"><label>20.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Al-Fuqaha</surname><given-names>A.</given-names></name><name><surname>Khreishah</surname><given-names>A.</given-names></name><name><surname>Guizani</surname><given-names>M.</given-names></name><name><surname>Rayes</surname><given-names>A.</given-names></name><name><surname>Mohammadi</surname><given-names>M.</given-names></name></person-group><article-title>Toward better horizontal integration among IoT services</article-title><source>IEEE Commun. Mag.</source><year>2015</year><volume>53</volume><fpage>72</fpage><lpage>79</lpage><pub-id pub-id-type="doi">10.1109/MCOM.2015.7263375</pub-id></element-citation></ref><ref id="B21-sensors-19-00603"><label>21.</label><element-citation publication-type="web"><article-title>SheepIT Project</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://www.av.it.pt/sheepit">http://www.av.it.pt/sheepit</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-04-15">(accessed on 15 April 2018)</date-in-citation></element-citation></ref><ref id="B22-sensors-19-00603"><label>22.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>N&#x000f3;brega</surname><given-names>L.</given-names></name><name><surname>Gon&#x000e7;alves</surname><given-names>P.</given-names></name><name><surname>Pedreiras</surname><given-names>P.</given-names></name><name><surname>Silva</surname><given-names>S.</given-names></name></person-group><article-title>Energy efficient design of a pasture sensor network</article-title><source>Proceedings of the 5th International Conference on Future Internet of Things and Cloud&#x02014;FiCloud 2017</source><conf-loc>Prague, Czech Republic</conf-loc><conf-date>21&#x02013;23 August 2017</conf-date></element-citation></ref><ref id="B23-sensors-19-00603"><label>23.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>N&#x000f3;brega</surname><given-names>L.</given-names></name><name><surname>Tavares</surname><given-names>A.</given-names></name><name><surname>Cardoso</surname><given-names>A.</given-names></name><name><surname>Gon&#x000e7;alves</surname><given-names>P.</given-names></name></person-group><article-title>Animal monitoring based on IoT technologies</article-title><source>Proceedings of the IoT Vertical and Topical Summit on Agriculture</source><conf-loc>Tuscany, Italy</conf-loc><conf-date>8&#x02013;9 May 2018</conf-date></element-citation></ref><ref id="B24-sensors-19-00603"><label>24.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Temprilho</surname><given-names>A.</given-names></name><name><surname>N&#x000f3;brega</surname><given-names>L.</given-names></name><name><surname>Pedreiras</surname><given-names>P.</given-names></name><name><surname>Gon&#x000e7;alves</surname><given-names>P.</given-names></name><name><surname>Silva</surname><given-names>S.</given-names></name></person-group><article-title>M2M Communication Stack for Intelligent Farming</article-title><source>Proceedings of the 2018 Global Internet of Things Summit (GIoTS)</source><conf-loc>Bilbao, Spain</conf-loc><conf-date>4&#x02013;7 June 2018</conf-date></element-citation></ref><ref id="B25-sensors-19-00603"><label>25.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Aijaz</surname><given-names>A.</given-names></name><name><surname>Aghvami</surname><given-names>A.H.</given-names></name></person-group><article-title>Cognitive Machine-to-Machine communications for Internet-of-Things: A protocol stack perspective</article-title><source>IEEE Internet Things J.</source><year>2015</year><volume>2</volume><fpage>103</fpage><lpage>112</lpage><pub-id pub-id-type="doi">10.1109/JIOT.2015.2390775</pub-id></element-citation></ref><ref id="B26-sensors-19-00603"><label>26.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Accettura</surname><given-names>N.</given-names></name><name><surname>Palattella</surname><given-names>M.R.</given-names></name><name><surname>Dohler</surname><given-names>M.</given-names></name><name><surname>Grieco</surname><given-names>L.A.</given-names></name><name><surname>Boggia</surname><given-names>G.</given-names></name></person-group><article-title>Standardized power-efficient &#x00026; internet-enabled communication stack for capillary M2M networks</article-title><source>Proceedings of the Wireless Communications and Networking Conference Workshops</source><conf-loc>Paris, France</conf-loc><conf-date>31 March&#x02013;3 April 2012</conf-date></element-citation></ref><ref id="B27-sensors-19-00603"><label>27.</label><element-citation publication-type="web"><person-group person-group-type="author"><collab>Vodafone</collab></person-group><article-title>Narrowband-IoT: Pushing the Boundaries of IoT</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.vodacombusiness.co.za/cs/groups/public/documents/document/vodafone_nb%E2%80%93iot_white_paper_fi.pdf">https://www.vodacombusiness.co.za/cs/groups/public/documents/document/vodafone_nb%E2%80%93iot_white_paper_fi.pdf</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-25">(accessed on 25 January 2018)</date-in-citation></element-citation></ref><ref id="B28-sensors-19-00603"><label>28.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Salman</surname><given-names>N.</given-names></name><name><surname>Rasool</surname><given-names>I.</given-names></name><name><surname>Kemp</surname><given-names>A.H.</given-names></name></person-group><article-title>Overview of the IEEE 802.15.4 standards family for low rate Wireless Personal Area Networks</article-title><source>Proceedings of the 7th International Symposium on Wireless Communication Systems</source><conf-loc>York, UK</conf-loc><conf-date>19&#x02013;22 September 2010</conf-date></element-citation></ref><ref id="B29-sensors-19-00603"><label>29.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Vogli</surname><given-names>E.</given-names></name><name><surname>Ribezzo</surname><given-names>G.</given-names></name><name><surname>Grieco</surname><given-names>L.A.</given-names></name><name><surname>Boggia</surname><given-names>G.</given-names></name></person-group><article-title>Fast join and synchronization schema in the IEEE 802.15.4e MAC</article-title><source>Proceedings of the Wireless Communications and Networking Conference Workshops</source><conf-loc>New Orleans, LA, USA</conf-loc><conf-date>9&#x02013;12 March 2015</conf-date></element-citation></ref><ref id="B30-sensors-19-00603"><label>30.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Al-Nidawi</surname><given-names>Y.</given-names></name><name><surname>Kemp</surname><given-names>A.H.</given-names></name></person-group><article-title>Mobility aware framework for timeslotted channel hopping IEEE 802.15.4e sensor networks</article-title><source>IEEE Sens. J.</source><year>2015</year><volume>15</volume><fpage>7112</fpage><lpage>7125</lpage><pub-id pub-id-type="doi">10.1109/JSEN.2015.2472276</pub-id></element-citation></ref><ref id="B31-sensors-19-00603"><label>31.</label><element-citation publication-type="web"><article-title>Specifications | Z-Wave the Public Standard</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://zwavepublic.com/specifications">http://zwavepublic.com/specifications</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-25">(accessed on 25 January 2018)</date-in-citation></element-citation></ref><ref id="B32-sensors-19-00603"><label>32.</label><element-citation publication-type="book"><person-group person-group-type="author"><collab>EPCglobal Inc.</collab></person-group><source>Specification for RFID Air Interface EPC&#x02122; Radio-Frequency Identity Protocols Class-1 Generation-2 UHF RFID Protocol for Communications at 860 MHz&#x02013;960 MHz Version 1.2.0</source><comment>Technical Report</comment><publisher-name>GS1</publisher-name><publisher-loc>Brussels, Belgium</publisher-loc><year>2006</year></element-citation></ref><ref id="B33-sensors-19-00603"><label>33.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Farris</surname><given-names>I.</given-names></name><name><surname>Pizzi</surname><given-names>S.</given-names></name><name><surname>Merenda</surname><given-names>M.</given-names></name><name><surname>Molinaro</surname><given-names>A.</given-names></name><name><surname>Carotenuto</surname><given-names>R.</given-names></name><name><surname>Iera</surname><given-names>A.</given-names></name></person-group><article-title>6lo-RFID: A Framework for Full Integration of Smart UHF RFID Tags into the Internet of Things</article-title><source>IEEE Netw.</source><year>2017</year><volume>31</volume><fpage>66</fpage><lpage>73</lpage><pub-id pub-id-type="doi">10.1109/MNET.2017.1600269</pub-id></element-citation></ref><ref id="B34-sensors-19-00603"><label>34.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Winter</surname><given-names>T.</given-names></name><name><surname>Thubert</surname><given-names>P.</given-names></name><name><surname>Brandt</surname><given-names>A.</given-names></name><name><surname>Hui</surname><given-names>J.</given-names></name><name><surname>Kelsey</surname><given-names>R.</given-names></name><name><surname>Levis</surname><given-names>P.</given-names></name><name><surname>Pister</surname><given-names>K.</given-names></name><name><surname>Struik</surname><given-names>R.</given-names></name><name><surname>Vasseur</surname><given-names>J.P.</given-names></name><name><surname>Alexander</surname><given-names>R.</given-names></name></person-group><article-title><italic>RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks</italic>; IETF RFC 6550</article-title><year>2012</year><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://tools.ietf.org/html/rfc6550">https://tools.ietf.org/html/rfc6550</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-31">(accessed on 31 January 2019)</date-in-citation></element-citation></ref><ref id="B35-sensors-19-00603"><label>35.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Sanjay</surname><given-names>A.</given-names></name><name><surname>Arrot</surname><given-names>M.</given-names></name><name><surname>Atwell</surname><given-names>M.</given-names></name><name><surname>Brome</surname><given-names>J.</given-names></name><name><surname>Conway</surname><given-names>A.</given-names></name><name><surname>Godfrey</surname><given-names>R.</given-names></name><name><surname>Greig</surname><given-names>R.</given-names></name><name><surname>Hintjens</surname><given-names>P.</given-names></name><name><surname>O&#x02019;Hara</surname><given-names>J.</given-names></name><name><surname>Radestrock</surname><given-names>M.</given-names></name><etal/></person-group><article-title>AMQP, Advanced Message Queuing Protocol, Protocol Specification</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf">https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-07-05">(accessed on 5 July 2018)</date-in-citation></element-citation></ref><ref id="B36-sensors-19-00603"><label>36.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Deschambault</surname><given-names>O.</given-names></name><name><surname>Gherbi</surname><given-names>A.</given-names></name><name><surname>L&#x000e9;gar&#x000e9;</surname><given-names>C.</given-names></name></person-group><article-title>Efficient implementation of the MQTT protocol for embedded systems</article-title><source>J. Inf. Process. Syst.</source><year>2017</year><volume>13</volume><fpage>26</fpage><lpage>39</lpage></element-citation></ref><ref id="B37-sensors-19-00603"><label>37.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Grigorik</surname><given-names>I.</given-names></name></person-group><article-title>Making the web faster with HTTP 2.0</article-title><source>Queue Dev.</source><year>2013</year><volume>11</volume><fpage>40</fpage><pub-id pub-id-type="doi">10.1145/2534706.2534721</pub-id></element-citation></ref><ref id="B38-sensors-19-00603"><label>38.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Lam</surname><given-names>K.H.</given-names></name><name><surname>Cheung</surname><given-names>C.C.</given-names></name><name><surname>Lee</surname><given-names>W.C.</given-names></name></person-group><article-title>LoRa-based localization systems for noisy outdoor environment</article-title><source>Proceedings of the 2017 IEEE 13th International Conference on Wireless and Mobile Computing, Networking and Communications</source><conf-loc>Rome, Italy</conf-loc><conf-date>9&#x02013;11 October 2017</conf-date></element-citation></ref><ref id="B39-sensors-19-00603"><label>39.</label><element-citation publication-type="web"><article-title>LoRa | Geolocation | Zakelijk KPN Forum</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://zakelijkforum.kpn.com/lora-forum-16/lora-geolocation-8555">https://zakelijkforum.kpn.com/lora-forum-16/lora-geolocation-8555</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-18">(accessed on 18 January 2019)</date-in-citation></element-citation></ref><ref id="B40-sensors-19-00603"><label>40.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Nair</surname><given-names>K.</given-names></name><name><surname>Kulkarni</surname><given-names>J.</given-names></name><name><surname>Warde</surname><given-names>M.</given-names></name><name><surname>Dave</surname><given-names>Z.</given-names></name><name><surname>Rawalgaonkar</surname><given-names>V.</given-names></name><name><surname>Gore</surname><given-names>G.</given-names></name><name><surname>Joshi</surname><given-names>J.</given-names></name></person-group><article-title>Optimizing power consumption in IoT based Wireless Sensor Networks using Bluetooth Low Energy</article-title><source>Proceedings of the International Conference on Green Computing and Internet of Things</source><conf-loc>Delhi, India</conf-loc><conf-date>8&#x02013;10 October 2015</conf-date></element-citation></ref><ref id="B41-sensors-19-00603"><label>41.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Frank</surname><given-names>R.</given-names></name><name><surname>Bronzi</surname><given-names>W.</given-names></name><name><surname>Castignani</surname><given-names>G.</given-names></name><name><surname>Engel</surname><given-names>T.</given-names></name></person-group><article-title>Bluetooth Low Energy: An alternative technology for VANET applications</article-title><source>Proceedings of the 11th Annual Conference on Wireless On-Demand Network Systems and Services</source><conf-loc>Obergurgl, Austria</conf-loc><conf-date>2&#x02013;4 April 2014</conf-date></element-citation></ref><ref id="B42-sensors-19-00603"><label>42.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Darroudi</surname><given-names>S.</given-names></name><name><surname>Gomez</surname><given-names>C.</given-names></name><name><surname>Darroudi</surname><given-names>S.M.</given-names></name><name><surname>Gomez</surname><given-names>C.</given-names></name></person-group><article-title>Bluetooth Low Energy Mesh Networks: A Survey</article-title><source>Sensors</source><year>2017</year><volume>17</volume><elocation-id>1467</elocation-id><pub-id pub-id-type="doi">10.3390/s17071467</pub-id><pub-id pub-id-type="pmid">28640183</pub-id></element-citation></ref><ref id="B43-sensors-19-00603"><label>43.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Zhu</surname><given-names>Q.</given-names></name><name><surname>Wang</surname><given-names>R.</given-names></name><name><surname>Chen</surname><given-names>Q.</given-names></name><name><surname>Liu</surname><given-names>Y.</given-names></name><name><surname>Qin</surname><given-names>W.</given-names></name></person-group><article-title>IoT gateway: Bridging Wireless Sensor Networks into Internet of Things</article-title><source>Proceedings of the IEEE/IFIP 8th International Conference onEmbedded and Ubiquitous Computing</source><conf-loc>Hong Kong, China</conf-loc><conf-date>11&#x02013;13 December 2010</conf-date></element-citation></ref><ref id="B44-sensors-19-00603"><label>44.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Guoqiang</surname><given-names>S.</given-names></name><name><surname>Yanming</surname><given-names>C.</given-names></name><name><surname>Chao</surname><given-names>Z.</given-names></name><name><surname>Yanxu</surname><given-names>Z.</given-names></name></person-group><article-title>Design and implementation of a smart IoT gateway</article-title><source>Proceedings of the 2013 IEEE International Conference on Green Computing and Communications and IEEE Internet of Things and IEEE Cyber, Physical and Social Computing</source><conf-loc>Beijing, China</conf-loc><conf-date>20&#x02013;23 August 2013</conf-date></element-citation></ref><ref id="B45-sensors-19-00603"><label>45.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Aloi</surname><given-names>G.</given-names></name><name><surname>Caliciuri</surname><given-names>G.</given-names></name><name><surname>Fortino</surname><given-names>G.</given-names></name><name><surname>Gravina</surname><given-names>R.</given-names></name><name><surname>Pace</surname><given-names>P.</given-names></name><name><surname>Russo</surname><given-names>W.</given-names></name><name><surname>Savaglio</surname><given-names>C.</given-names></name></person-group><article-title>A mobile multi-technology gateway to enable IoT interoperability</article-title><source>Proceedings of the 2016 IEEE First International Conference on Internet-of-Things Design and Implementation</source><conf-loc>Berlin, Germany</conf-loc><conf-date>4&#x02013;8 April 2016</conf-date></element-citation></ref><ref id="B46-sensors-19-00603"><label>46.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Zachariah</surname><given-names>T.</given-names></name><name><surname>Klugman</surname><given-names>N.</given-names></name><name><surname>Campbell</surname><given-names>B.</given-names></name><name><surname>Adkins</surname><given-names>J.</given-names></name><name><surname>Jackson</surname><given-names>N.</given-names></name><name><surname>Dutta</surname><given-names>P.</given-names></name></person-group><article-title>The Internet of Things has a gateway problem</article-title><source>Proceedings of the 16th International Workshop on Mobile Computing Systems and Applications</source><conf-loc>Santa Fe, NM, USA</conf-loc><conf-date>12&#x02013;13 February 2015</conf-date></element-citation></ref><ref id="B47-sensors-19-00603"><label>47.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Datta</surname><given-names>S.K.</given-names></name><name><surname>Bonnet</surname><given-names>C.</given-names></name><name><surname>Nikaein</surname><given-names>N.</given-names></name></person-group><article-title>An IoT gateway centric architecture to provide novel M2M services</article-title><source>Proceedings of the IEEE World Forum on Internet of Things 2014</source><conf-loc>Seoul, Korea</conf-loc><conf-date>6&#x02013;8 March 2014</conf-date></element-citation></ref><ref id="B48-sensors-19-00603"><label>48.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Rodriguez</surname><given-names>A.</given-names></name></person-group><article-title>Restful web services: The basics</article-title><source>IBM Developer Works</source><comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://www.gregbulla.com/TechStuff/Docs/ws-restful-pdf.pdf">http://www.gregbulla.com/TechStuff/Docs/ws-restful-pdf.pdf</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-16">(accessed on 16 January 2019)</date-in-citation></element-citation></ref><ref id="B49-sensors-19-00603"><label>49.</label><element-citation publication-type="web"><article-title>OneM2M</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://www.onem2m.org/">http://www.onem2m.org/</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-16">(accessed on 16 January 2019)</date-in-citation></element-citation></ref><ref id="B50-sensors-19-00603"><label>50.</label><element-citation publication-type="web"><article-title>The Internet of Things (IoT) Starts with Intel Inside<sup>&#x000ae;</sup></article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.intel.com/content/www/us/en/internet-of-things/overview.html">https://www.intel.com/content/www/us/en/internet-of-things/overview.html</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-16">(accessed on 16 January 2019)</date-in-citation></element-citation></ref><ref id="B51-sensors-19-00603"><label>51.</label><element-citation publication-type="web"><article-title>Smart M2M ToR</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://portal.etsi.org/TBSiteMap/SmartM2M/SmartM2MToR.aspx">https://portal.etsi.org/TBSiteMap/SmartM2M/SmartM2MToR.aspx</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-16">(accessed on 16 January 2019)</date-in-citation></element-citation></ref><ref id="B52-sensors-19-00603"><label>52.</label><element-citation publication-type="web"><article-title>Lightweight M2M (LWM2M)&#x02014;OMA SpecWorks</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.omaspecworks.org/what-is-oma-specworks/iot/lightweight-m2m-lwm2m/">https://www.omaspecworks.org/what-is-oma-specworks/iot/lightweight-m2m-lwm2m/</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-16">(accessed on 16 January 2019)</date-in-citation></element-citation></ref><ref id="B53-sensors-19-00603"><label>53.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Hunter</surname><given-names>J.</given-names></name><name><surname>Brooking</surname><given-names>C.</given-names></name><name><surname>Brimblecombe</surname><given-names>W.</given-names></name><name><surname>Dwyer</surname><given-names>R.G.</given-names></name><name><surname>Campbell</surname><given-names>H.A.</given-names></name><name><surname>Watts</surname><given-names>M.E.</given-names></name><name><surname>Franklin</surname><given-names>C.E.</given-names></name></person-group><article-title>OzTrack&#x02014;E-Infrastructure to Support the Management, Analysis and Sharing of Animal Tracking Data</article-title><source>Proceedings of the IEEE 9th International Conference on e-Science</source><conf-loc>Beijing, China</conf-loc><conf-date>22&#x02013;25 October 2013</conf-date><fpage>140</fpage><lpage>147</lpage></element-citation></ref><ref id="B54-sensors-19-00603"><label>54.</label><element-citation publication-type="web"><article-title>E-Pasto&#x02014;GPS pour Animaux d&#x02019;&#x000c9;levage</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.epasto.fr">https://www.epasto.fr</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-11-28">(accessed on 28 November 2018)</date-in-citation></element-citation></ref><ref id="B55-sensors-19-00603"><label>55.</label><element-citation publication-type="web"><article-title>Digitanimal</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://digitanimal.com/">https://digitanimal.com/</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-05-17">(accessed on 17 May 2018)</date-in-citation></element-citation></ref><ref id="B56-sensors-19-00603"><label>56.</label><element-citation publication-type="web"><article-title>e-Shepherd&#x02014;Agersens</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.agersens.com">https://www.agersens.com</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-11-28">(accessed on 28 November 2018)</date-in-citation></element-citation></ref><ref id="B57-sensors-19-00603"><label>57.</label><element-citation publication-type="web"><article-title>Nofence.no&#x02014;GPS-Baserte Virtuelle Gjerder for Geiter</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://nofence.no">https://nofence.no</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-11-28">(accessed on 28 November 2018)</date-in-citation></element-citation></ref><ref id="B58-sensors-19-00603"><label>58.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Brunberg</surname><given-names>E.I.</given-names></name><name><surname>B&#x000f8;e</surname><given-names>K.E.</given-names></name><name><surname>S&#x000f8;rheim</surname><given-names>K.M.</given-names></name></person-group><article-title>Testing a new virtual fencing system on sheep</article-title><source>Acta Agric. Scand. A Anim. Sci.</source><year>2015</year><volume>65</volume><fpage>168</fpage><lpage>175</lpage><pub-id pub-id-type="doi">10.1080/09064702.2015.1128478</pub-id></element-citation></ref><ref id="B59-sensors-19-00603"><label>59.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Brunberg</surname><given-names>E.I.</given-names></name><name><surname>Bergslid</surname><given-names>I.K.</given-names></name><name><surname>B&#x000f8;e</surname><given-names>K.E.</given-names></name><name><surname>S&#x000f8;rheim</surname><given-names>K.M.</given-names></name></person-group><article-title>The ability of ewes with lambs to learn a virtual fencing system</article-title><source>Animal</source><year>2017</year><volume>11</volume><fpage>2045</fpage><lpage>2050</lpage><pub-id pub-id-type="doi">10.1017/S1751731117000891</pub-id><pub-id pub-id-type="pmid">28490388</pub-id></element-citation></ref><ref id="B60-sensors-19-00603"><label>60.</label><element-citation publication-type="journal"><article-title>ZigBee-based wireless sensor networks for monitoring animal presence and pasture time in a strip of new grass</article-title><source>Comput. Electron. Agric.</source><year>2008</year><volume>61</volume><fpage>79</fpage><lpage>87</lpage><pub-id pub-id-type="doi">10.1016/j.compag.2007.09.010</pub-id></element-citation></ref><ref id="B61-sensors-19-00603"><label>61.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Huirc&#x000e1;n</surname><given-names>J.I.</given-names></name><name><surname>Mu&#x000f1;oz</surname><given-names>C.</given-names></name><name><surname>Young</surname><given-names>H.</given-names></name><name><surname>Von Dossow</surname><given-names>L.</given-names></name><name><surname>Bustos</surname><given-names>J.</given-names></name><name><surname>Vivallo</surname><given-names>G.</given-names></name><name><surname>Toneatti</surname><given-names>M.</given-names></name></person-group><article-title>ZigBee-based Wireless Sensor Network localization for cattle monitoring in grazing fields</article-title><source>Comput. Electron. Agric.</source><year>2010</year><volume>74</volume><fpage>258</fpage><lpage>264</lpage><pub-id pub-id-type="doi">10.1016/j.compag.2010.08.014</pub-id></element-citation></ref><ref id="B62-sensors-19-00603"><label>62.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Nathan</surname><given-names>R.</given-names></name><name><surname>Spiegel</surname><given-names>O.</given-names></name><name><surname>Fortmann-Roe</surname><given-names>S.</given-names></name><name><surname>Harel</surname><given-names>R.</given-names></name><name><surname>Wikelski</surname><given-names>M.</given-names></name><name><surname>Getz</surname><given-names>W.M.</given-names></name></person-group><article-title>Using tri-axial acceleration data to identify behavioral modes of free-ranging animals: General concepts and tools illustrated for griffon vultures</article-title><source>J. Exp. Biol.</source><year>2012</year><volume>215</volume><fpage>986</fpage><lpage>996</lpage><pub-id pub-id-type="doi">10.1242/jeb.058602</pub-id><pub-id pub-id-type="pmid">22357592</pub-id></element-citation></ref><ref id="B63-sensors-19-00603"><label>63.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Moreau</surname><given-names>M.</given-names></name><name><surname>Siebert</surname><given-names>S.</given-names></name><name><surname>Buerkert</surname><given-names>A.</given-names></name><name><surname>Schlecht</surname><given-names>E.</given-names></name></person-group><article-title>Use of a tri-axial accelerometer for automated recording and classification of goats&#x02019; grazing behaviour</article-title><source>Appl. Anim. Behav. Sci.</source><year>2009</year><volume>119</volume><fpage>158</fpage><lpage>170</lpage><pub-id pub-id-type="doi">10.1016/j.applanim.2009.04.008</pub-id></element-citation></ref><ref id="B64-sensors-19-00603"><label>64.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Schwager</surname><given-names>M.</given-names></name><name><surname>Anderson</surname><given-names>D.M.</given-names></name><name><surname>Butler</surname><given-names>Z.</given-names></name><name><surname>Rus</surname><given-names>D.</given-names></name></person-group><article-title>Robust classification of animal tracking data</article-title><source>Comput. Electron. Agric.</source><year>2007</year><volume>56</volume><fpage>46</fpage><lpage>59</lpage><pub-id pub-id-type="doi">10.1016/j.compag.2007.01.002</pub-id></element-citation></ref><ref id="B65-sensors-19-00603"><label>65.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dutta</surname><given-names>R.</given-names></name><name><surname>Smith</surname><given-names>D.</given-names></name><name><surname>Rawnsley</surname><given-names>R.</given-names></name><name><surname>Bishop-Hurley</surname><given-names>G.</given-names></name><name><surname>Hills</surname><given-names>J.</given-names></name><name><surname>Timms</surname><given-names>G.</given-names></name><name><surname>Henry</surname><given-names>D.</given-names></name></person-group><article-title>Dynamic cattle behavioural classification using supervised ensemble classifiers</article-title><source>Comput. Electron. Agric.</source><year>2015</year><volume>111</volume><fpage>18</fpage><lpage>28</lpage><pub-id pub-id-type="doi">10.1016/j.compag.2014.12.002</pub-id></element-citation></ref><ref id="B66-sensors-19-00603"><label>66.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>V&#x000e1;zquez Diosdado</surname><given-names>J.A.</given-names></name><name><surname>Barker</surname><given-names>Z.E.</given-names></name><name><surname>Hodges</surname><given-names>H.R.</given-names></name><name><surname>Amory</surname><given-names>J.R.</given-names></name><name><surname>Croft</surname><given-names>D.P.</given-names></name><name><surname>Bell</surname><given-names>N.J.</given-names></name><name><surname>Codling</surname><given-names>E.A.</given-names></name></person-group><article-title>Classification of behaviour in housed dairy cows using an accelerometer-based activity monitoring system</article-title><source>Anim. Biotelem.</source><year>2015</year><volume>3</volume><fpage>3</fpage><lpage>15</lpage><pub-id pub-id-type="doi">10.1186/s40317-015-0045-8</pub-id></element-citation></ref><ref id="B67-sensors-19-00603"><label>67.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Nadimi</surname><given-names>E.</given-names></name><name><surname>J&#x000f8;rgensen</surname><given-names>R.</given-names></name><name><surname>Blanes-Vidal</surname><given-names>V.</given-names></name><name><surname>Christensen</surname><given-names>S.</given-names></name></person-group><article-title>Monitoring and classifying animal behavior using ZigBee-based mobile ad hoc Wireless Sensor Networks and Artificial Neural Networks</article-title><source>Comput. Electron. Agric.</source><year>2012</year><volume>82</volume><fpage>44</fpage><lpage>54</lpage><pub-id pub-id-type="doi">10.1016/j.compag.2011.12.008</pub-id></element-citation></ref><ref id="B68-sensors-19-00603"><label>68.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Navon</surname><given-names>S.</given-names></name><name><surname>Mizrach</surname><given-names>A.</given-names></name><name><surname>Hetzroni</surname><given-names>A.</given-names></name><name><surname>Ungar</surname><given-names>E.D.</given-names></name></person-group><article-title>Automatic recognition of jaw movements in free-ranging cattle, goats and sheep, using acoustic monitoring</article-title><source>Biosyst. Eng.</source><year>2013</year><volume>114</volume><fpage>474</fpage><lpage>483</lpage><pub-id pub-id-type="doi">10.1016/j.biosystemseng.2012.08.005</pub-id></element-citation></ref><ref id="B69-sensors-19-00603"><label>69.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Alvarenga</surname><given-names>F.A.</given-names></name><name><surname>Borges</surname><given-names>I.</given-names></name><name><surname>Palkovi&#x0010d;</surname><given-names>L.</given-names></name><name><surname>Rodina</surname><given-names>J.</given-names></name><name><surname>Oddy</surname><given-names>V.H.</given-names></name><name><surname>Dobos</surname><given-names>R.C.</given-names></name></person-group><article-title>Using a three-axis accelerometer to identify and classify sheep behaviour at pasture</article-title><source>Appl. Anim. Behav. Sci.</source><year>2016</year><volume>181</volume><fpage>91</fpage><lpage>99</lpage><pub-id pub-id-type="doi">10.1016/j.applanim.2016.05.026</pub-id></element-citation></ref><ref id="B70-sensors-19-00603"><label>70.</label><element-citation publication-type="web"><article-title>CowScout</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://www.gea.com/en/products/activity-detection-cowscout.jsp">https://www.gea.com/en/products/activity-detection-cowscout.jsp</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-26">(accessed on 26 January 2018)</date-in-citation></element-citation></ref><ref id="B71-sensors-19-00603"><label>71.</label><element-citation publication-type="web"><article-title>Cowlar</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://cowlar.com/">https://cowlar.com/</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-26">(accessed on 26 January 2018)</date-in-citation></element-citation></ref><ref id="B72-sensors-19-00603"><label>72.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>N&#x000f3;brega</surname><given-names>L.</given-names></name><name><surname>Pedreiras</surname><given-names>P.</given-names></name><name><surname>Gon&#x000e7;alves</surname><given-names>P.</given-names></name></person-group><article-title>SheepIT&#x02014;An electronic shepherd for the vineyards</article-title><source>Proceedings of the 8th International Conference on Information and Communication Technologies in Agriculture</source><conf-loc>Chania, Crete, Greece</conf-loc><conf-date>21&#x02013;24 September 2017</conf-date></element-citation></ref><ref id="B73-sensors-19-00603"><label>73.</label><element-citation publication-type="web"><article-title>Agersens</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://agersens.com/">https://agersens.com/</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-01-26">(accessed on 26 January 2018)</date-in-citation></element-citation></ref><ref id="B74-sensors-19-00603"><label>74.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Cardoso</surname><given-names>A.</given-names></name><name><surname>Pereira</surname><given-names>J.</given-names></name><name><surname>N&#x000f3;brega</surname><given-names>L.</given-names></name><name><surname>Gon&#x000e7;alves</surname><given-names>P.</given-names></name><name><surname>Pedreiras</surname><given-names>P.</given-names></name><name><surname>Silva</surname><given-names>V.</given-names></name></person-group><article-title>SheepIT: Activity and Location Monitoring</article-title><source>Proceedings of the INForum 2018&#x02014;Simp&#x000f3;sio de Inform&#x000e1;tica</source><conf-loc>Coimbra, Portugal</conf-loc><conf-date>5&#x02013;6 September 2018</conf-date></element-citation></ref><ref id="B75-sensors-19-00603"><label>75.</label><element-citation publication-type="book"><person-group person-group-type="author"><name><surname>Temprilho</surname><given-names>A.M.</given-names></name></person-group><article-title>Pastor Virtual</article-title><source>Master&#x02019;s Dissertaton</source><publisher-name>University of Aveiro</publisher-name><publisher-loc>Aveiro, Portugal</publisher-loc><year>2017</year></element-citation></ref><ref id="B76-sensors-19-00603"><label>76.</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Parliament</surname><given-names>E.</given-names></name></person-group><article-title>Directive 2010/40/EU of the European Parliament and of the Council of 7 July 2010 on the framework for the deployment of Intelligent Transport Systems in the field of road transport and for interfaces with other modes of transport Text with EEA relevance</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=CELEX%3A32010L0040">https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=CELEX%3A32010L0040</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2019-01-31">(accessed on 31 January 2019)</date-in-citation></element-citation></ref><ref id="B77-sensors-19-00603"><label>77.</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zaharia</surname><given-names>M.</given-names></name><name><surname>Xin</surname><given-names>R.S.</given-names></name><name><surname>Wendell</surname><given-names>P.</given-names></name><name><surname>Das</surname><given-names>T.</given-names></name><name><surname>Armbrust</surname><given-names>M.</given-names></name><name><surname>Dave</surname><given-names>A.</given-names></name><name><surname>Meng</surname><given-names>X.</given-names></name><name><surname>Rosen</surname><given-names>J.</given-names></name><name><surname>Venkataraman</surname><given-names>S.</given-names></name><name><surname>Franklin</surname><given-names>M.J.</given-names></name></person-group><article-title>Apache spark: A unified engine for big data processing</article-title><source>Commun. ACM</source><year>2016</year><volume>59</volume><fpage>56</fpage><lpage>65</lpage><pub-id pub-id-type="doi">10.1145/2934664</pub-id></element-citation></ref><ref id="B78-sensors-19-00603"><label>78.</label><element-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Proctor</surname><given-names>M.</given-names></name></person-group><article-title>Drools: A Rule Engine for Complex Event Processing</article-title><source>Proceedings of the 4th International Conference on Applications of Graph Transformations with Industrial Relevance</source><conf-loc>Budapest, Hungary</conf-loc><conf-date>4&#x02013;7 October 2011</conf-date><fpage>2</fpage></element-citation></ref><ref id="B79-sensors-19-00603"><label>79.</label><element-citation publication-type="web"><article-title>Orange Pi Zero</article-title><comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://www.orangepi.org/orangepizero/">http://www.orangepi.org/orangepizero/</ext-link></comment><date-in-citation content-type="access-date" iso-8601-date="2018-11-26">(accessed on 26 November 2018)</date-in-citation></element-citation></ref></ref-list></back><floats-group><fig id="sensors-19-00603-f001" orientation="portrait" position="float"><label>Figure 1</label><caption><p>Communications in Internet of Things&#x02014;major groups (based on [<xref rid="B27-sensors-19-00603" ref-type="bibr">27</xref>]).</p></caption><graphic xlink:href="sensors-19-00603-g001"/></fig><fig id="sensors-19-00603-f002" orientation="portrait" position="float"><label>Figure 2</label><caption><p>Popular IoT standards on an Internet Protocol (IP)-based solution (based on [<xref rid="B7-sensors-19-00603" ref-type="bibr">7</xref>]).</p></caption><graphic xlink:href="sensors-19-00603-g002"/></fig><fig id="sensors-19-00603-f003" orientation="portrait" position="float"><label>Figure 3</label><caption><p>Overall system architecture.</p></caption><graphic xlink:href="sensors-19-00603-g003"/></fig><fig id="sensors-19-00603-f004" orientation="portrait" position="float"><label>Figure 4</label><caption><p>Intelligent farming Machine-to-Machine (M2M) Stack.</p></caption><graphic xlink:href="sensors-19-00603-g004"/></fig><fig id="sensors-19-00603-f005" orientation="portrait" position="float"><label>Figure 5</label><caption><p>Micro-cycles (&#x000b5;C) structure [<xref rid="B75-sensors-19-00603" ref-type="bibr">75</xref>].</p></caption><graphic xlink:href="sensors-19-00603-g005"/></fig><fig id="sensors-19-00603-f006" orientation="portrait" position="float"><label>Figure 6</label><caption><p>Message sequence chart of a &#x000b5;C type 2 and 3.</p></caption><graphic xlink:href="sensors-19-00603-g006"/></fig><fig id="sensors-19-00603-f007" orientation="portrait" position="float"><label>Figure 7</label><caption><p>Collar Registration Message Sequence Chart.</p></caption><graphic xlink:href="sensors-19-00603-g007"/></fig><fig id="sensors-19-00603-f008" orientation="portrait" position="float"><label>Figure 8</label><caption><p>Gateway internal modules.</p></caption><graphic xlink:href="sensors-19-00603-g008"/></fig><fig id="sensors-19-00603-f009" orientation="portrait" position="float"><label>Figure 9</label><caption><p>IoT Gateway activity diagrams. (<bold>a</bold>) Localization and alarm procedures. (<bold>b</bold>) Management procedures.</p></caption><graphic xlink:href="sensors-19-00603-g009"/></fig><fig id="sensors-19-00603-f010" orientation="portrait" position="float"><label>Figure 10</label><caption><p>Computational Platform architecture.</p></caption><graphic xlink:href="sensors-19-00603-g010"/></fig><fig id="sensors-19-00603-f011" orientation="portrait" position="float"><label>Figure 11</label><caption><p>Cumulative processing duration.</p></caption><graphic xlink:href="sensors-19-00603-g011"/></fig><table-wrap id="sensors-19-00603-t001" orientation="portrait" position="float"><object-id pub-id-type="pii">sensors-19-00603-t001_Table 1</object-id><label>Table 1</label><caption><p>Summary of the most relevant works and commercial platforms on animal monitoring.</p></caption><table frame="hsides" rules="groups"><thead><tr><th rowspan="3" align="left" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Feature/Solution</th><th colspan="4" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Localization Monitoring</th><th align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1">
</th><th colspan="4" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Activiy Monitoring</th></tr><tr><th align="center" valign="middle" rowspan="1" colspan="1">Nofence</th><th align="center" valign="middle" rowspan="1" colspan="1">eShepherd</th><th align="center" valign="middle" rowspan="1" colspan="1">Digitanimal</th><th align="center" valign="middle" rowspan="1" colspan="1">Huircan</th><th align="center" valign="middle" rowspan="1" colspan="1">Nadimi</th><th align="center" valign="middle" rowspan="1" colspan="1">Cowlar</th><th align="center" valign="middle" rowspan="1" colspan="1">CowScout</th><th align="center" valign="middle" rowspan="1" colspan="1">Dutta</th><th align="center" valign="middle" rowspan="1" colspan="1">Alvarenga</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">[<xref rid="B57-sensors-19-00603" ref-type="bibr">57</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">[<xref rid="B73-sensors-19-00603" ref-type="bibr">73</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">[<xref rid="B55-sensors-19-00603" ref-type="bibr">55</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">et al. [<xref rid="B61-sensors-19-00603" ref-type="bibr">61</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">et al. [<xref rid="B67-sensors-19-00603" ref-type="bibr">67</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">[<xref rid="B71-sensors-19-00603" ref-type="bibr">71</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">[<xref rid="B70-sensors-19-00603" ref-type="bibr">70</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">et al. [<xref rid="B65-sensors-19-00603" ref-type="bibr">65</xref>]</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">et al. [<xref rid="B69-sensors-19-00603" ref-type="bibr">69</xref>]</th></tr></thead><tbody><tr><td align="left" valign="middle" rowspan="1" colspan="1">Animals</td><td align="center" valign="middle" rowspan="1" colspan="1">goats</td><td align="center" valign="middle" rowspan="1" colspan="1">cattle</td><td align="center" valign="middle" rowspan="1" colspan="1">several</td><td align="center" valign="middle" rowspan="1" colspan="1">sheep</td><td align="center" valign="middle" rowspan="1" colspan="1">sheep</td><td align="center" valign="middle" rowspan="1" colspan="1">cattle</td><td align="center" valign="middle" rowspan="1" colspan="1">cattle</td><td align="center" valign="middle" rowspan="1" colspan="1">cattle</td><td align="center" valign="middle" rowspan="1" colspan="1">sheep</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Data gathering</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Real-Time Data</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Localization</td><td align="center" valign="middle" rowspan="1" colspan="1">GPS</td><td align="center" valign="middle" rowspan="1" colspan="1">GPS</td><td align="center" valign="middle" rowspan="1" colspan="1">GPS</td><td align="center" valign="middle" rowspan="1" colspan="1">RSSI</td><td align="center" valign="middle" rowspan="1" colspan="1">GPS</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Virtual fence</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Activity Monitoring</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">no</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td><td align="center" valign="middle" rowspan="1" colspan="1">yes</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Posture control</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">no</td></tr></tbody></table></table-wrap><table-wrap id="sensors-19-00603-t002" orientation="portrait" position="float"><object-id pub-id-type="pii">sensors-19-00603-t002_Table 2</object-id><label>Table 2</label><caption><p>Micro-cycles types currently defined [<xref rid="B72-sensors-19-00603" ref-type="bibr">72</xref>].</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">&#x000b5;C Type&#x02014;Name</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Purpose</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">MAC Policy</th></tr></thead><tbody><tr><td align="center" valign="middle" rowspan="1" colspan="1">1&#x02014;Pairing Request (PR)</td><td align="center" valign="middle" rowspan="1" colspan="1">Device&#x02019;s pairing</td><td align="center" valign="middle" rowspan="1" colspan="1">CSMA</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">2&#x02014;Collar-to-Beacon (C2B)</td><td align="center" valign="middle" rowspan="1" colspan="1">Collar (mobile nodes) communications</td><td align="center" valign="middle" rowspan="1" colspan="1">TMDA</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">3&#x02014;Beacon-to-Beacon (B2B)</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Inter-beacon relay</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">TMDA</td></tr></tbody></table></table-wrap><table-wrap id="sensors-19-00603-t003" orientation="portrait" position="float"><object-id pub-id-type="pii">sensors-19-00603-t003_Table 3</object-id><label>Table 3</label><caption><p>The Median Duration of the Most Important Tasks Running on the Gateway.</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Task Duration vs. Number of Collars</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">100</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">200</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">500</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">1000</th></tr></thead><tbody><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Rx Beacons (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">20.02</td><td align="center" valign="middle" rowspan="1" colspan="1">20.02</td><td align="center" valign="middle" rowspan="1" colspan="1">20.01</td><td align="center" valign="middle" rowspan="1" colspan="1">20.02</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Rx Collars (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">331.98</td><td align="center" valign="middle" rowspan="1" colspan="1">661.99</td><td align="center" valign="middle" rowspan="1" colspan="1">1651.97</td><td align="center" valign="middle" rowspan="1" colspan="1">3304.96</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Process Beacons (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">0.49</td><td align="center" valign="middle" rowspan="1" colspan="1">0.50</td><td align="center" valign="middle" rowspan="1" colspan="1">0.50</td><td align="center" valign="middle" rowspan="1" colspan="1">0.50</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Process Collars (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">2.51</td><td align="center" valign="middle" rowspan="1" colspan="1">4.92</td><td align="center" valign="middle" rowspan="1" colspan="1">12.15</td><td align="center" valign="middle" rowspan="1" colspan="1">24.15</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AMQP Library (ms)</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">23.19</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">113.15</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">243.63</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">492.60</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Cumulative time (ms)</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">380.68</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1483.66</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1932.25</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">3859.17</td></tr></tbody></table></table-wrap><table-wrap id="sensors-19-00603-t004" orientation="portrait" position="float"><object-id pub-id-type="pii">sensors-19-00603-t004_Table 4</object-id><label>Table 4</label><caption><p>The worst case measurements (maximum duration measured).</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Task Duration vs. Number of Collars</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">100</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">200</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">500</th><th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">1000</th></tr></thead><tbody><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Rx Beacons (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">23.132</td><td align="center" valign="middle" rowspan="1" colspan="1">22.04</td><td align="center" valign="middle" rowspan="1" colspan="1">22.01</td><td align="center" valign="middle" rowspan="1" colspan="1">26.82</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Rx Collars (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">333.25</td><td align="center" valign="middle" rowspan="1" colspan="1">668.25</td><td align="center" valign="middle" rowspan="1" colspan="1">1658.69</td><td align="center" valign="middle" rowspan="1" colspan="1">3306.94</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Process Beacons (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">2.56</td><td align="center" valign="middle" rowspan="1" colspan="1">2.79</td><td align="center" valign="middle" rowspan="1" colspan="1">2.90</td><td align="center" valign="middle" rowspan="1" colspan="1">3.49</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Duration Process Collars (ms)</td><td align="center" valign="middle" rowspan="1" colspan="1">15.78</td><td align="center" valign="middle" rowspan="1" colspan="1">26.56</td><td align="center" valign="middle" rowspan="1" colspan="1">66.05</td><td align="center" valign="middle" rowspan="1" colspan="1">130.31</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">AMQP Library (ms)</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">378.80</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">742.18</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1342.81</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">2082.95</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Cumulative time (ms)</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">745.84</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1430.63</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">3028.57</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">5534.48</td></tr></tbody></table></table-wrap></floats-group></article>